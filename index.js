(function(){"use strict";function f(s,t,e,i,a,o,l,r){var c=typeof s=="function"?s.options:s;return t&&(c.render=t,c.staticRenderFns=e,c._compiled=!0),o&&(c._scopeId="data-v-"+o),{exports:s,options:c}}const b={name:"VariantsTab",props:{variants:{type:Array,default:()=>[]}},computed:{hasVariants(){return Array.isArray(this.variants)&&this.variants.length>0}},methods:{dropdownRefKey(s){return`options-${s}`},getDropdownRef(s){const t=this.$refs[this.dropdownRefKey(s)];return Array.isArray(t)?t[0]:t},toggleOptions(s){const t=this.getDropdownRef(s);t&&typeof t.toggle=="function"&&t.toggle()},openVariant(s){this.$panel.view.open(`simplify/variants/${s.code}`)},openAssignProviderDialog(s){this.$emit("assign-provider",s)}}};var $=function(){var t=this,e=t._self._c;return e("section",{staticClass:"simplify-languages"},[t.hasVariants?e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(" "+t._s(t.$t("simplify.languages.headline"))+" ")])])]):t._e(),e("div",{staticClass:"k-collection"},[t.hasVariants?e("div",{staticClass:"k-items k-list-items",attrs:{"data-layout":"list","data-size":"medium"}},t._l(t.variants,function(i){return e("div",{key:i.code,staticClass:"k-item k-list-item",attrs:{"data-has-image":"true","data-layout":"list"}},[e("figure",{staticClass:"k-frame k-icon-frame k-item-image",staticStyle:{"--fit":"cover","--ratio":"auto","--back":"var(--color-black)"}},[e("svg",{staticClass:"k-icon",staticStyle:{color:"var(--color-gray)"},attrs:{"aria-hidden":"true","data-type":"translate"}},[e("use",{attrs:{"xlink:href":"#icon-translate"}})])]),e("div",{staticClass:"k-item-content"},[e("h3",{staticClass:"k-item-title",staticStyle:{display:"flex","align-items":"center"},attrs:{title:i.enabled===!1?i.name+" ("+t.$t("simplify.languages.paused")+")":i.name}},[e("a",{staticClass:"k-link",staticStyle:{display:"inline-flex","align-items":"center","white-space":"nowrap",gap:"0.3rem"},attrs:{href:t.$panel.url("simplify/variants/"+i.code)}},[i.enabled===!1?e("span",{staticStyle:{display:"inline-flex","align-items":"center","flex-shrink":"0"},attrs:{title:t.$t("simplify.languages.paused")}},[e("k-icon",{staticClass:"variant-paused-icon",staticStyle:{color:"var(--color-gray-600)"},attrs:{type:"pause"}})],1):t._e(),e("span",[t._v(t._s(i.name))])])]),e("span",{staticClass:"k-item-info",attrs:{title:i.providerLabel||t.$t("simplify.provider.notConfigured")}},[i.providerLabel?e("span",[t._v(t._s(i.providerLabel))]):e("span",{staticClass:"missingProvider"},[t._v(t._s(t.$t("simplify.provider.notConfigured")))])])]),e("nav",{staticClass:"k-item-options"},[e("k-button",{staticClass:"k-item-options-button",attrs:{icon:"dots"},on:{click:function(a){return t.toggleOptions(i.code)}}}),e("k-dropdown-content",{ref:t.dropdownRefKey(i.code),refInFor:!0,attrs:{alignx:"right"}},[e("k-dropdown-item",{attrs:{icon:"edit"},on:{click:function(a){return t.openVariant(i)}}},[t._v(" "+t._s(t.$t("edit"))+" ")]),e("k-dropdown-item",{attrs:{icon:"sparkling"},on:{click:function(a){return t.openAssignProviderDialog(i)}}},[t._v(" "+t._s(t.$t("simplify.provider.assign"))+" ")]),e("k-dropdown-item",{attrs:{icon:"cog"},on:{click:function(a){return t.$emit("open-settings",i)}}},[t._v(" "+t._s(t.$t("settings"))+" ")]),e("hr"),e("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(a){return t.$emit("delete",i)}}},[t._v(" "+t._s(t.$t("delete"))+" ")])],1)],1)])}),0):e("k-empty",{attrs:{icon:"translate",layout:"cards"}},[t._v(" "+t._s(t.$t("simplify.languages.empty"))+" ")])],1)])},k=[],C=f(b,$,k,!1,null,null);const D=C.exports,w={name:"ProvidersTab",props:{providers:{type:Object,default:()=>({})}},computed:{providersList(){return Object.entries(this.providers).map(([s,t])=>({id:s,name:t.displayName||s,icon:t.icon||"sparkling",modelCount:t.modelCount||0}))},hasProviders(){return this.providersList.length>0}},methods:{getProviderName(s){const t=this.providersList.find(e=>e.id===s);return(t==null?void 0:t.name)||s},getProviderIcon(s){const t=this.providersList.find(e=>e.id===s);return(t==null?void 0:t.icon)||"sparkling"}}};var S=function(){var t=this,e=t._self._c;return e("section",{staticClass:"simplify-providers"},[t.hasProviders?e("header",{staticClass:"k-section-header"},[e("h2",{staticClass:"k-label k-section-label",attrs:{title:t.$t("simplify.providers.headline")}},[e("span",{staticClass:"k-label-text"},[t._v(t._s(t.$t("simplify.providers.headline")))])])]):t._e(),e("div",{staticClass:"k-collection"},[t.hasProviders?e("div",{staticClass:"k-items k-list-items",attrs:{"data-layout":"list","data-size":"medium"}},t._l(t.providersList,function(i){return e("div",{key:i.id,staticClass:"k-item k-list-item",attrs:{"data-has-image":"true","data-layout":"list"}},[i.icon?e("figure",{staticClass:"k-frame k-icon-frame k-item-image",staticStyle:{"--fit":"cover","--ratio":"auto","--back":"var(--color-black)"}},[e("svg",{staticClass:"k-icon",staticStyle:{color:"var(--color-gray)"},attrs:{"aria-hidden":"true","data-type":i.icon}},[e("use",{attrs:{"xlink:href":"#icon-"+i.icon}})])]):t._e(),e("div",{staticClass:"k-item-content"},[e("h3",{staticClass:"k-item-title",attrs:{title:i.name}},[e("a",{staticClass:"k-link",attrs:{href:t.$panel.url("simplify/providers/"+i.id)}},[e("span",[t._v(t._s(i.name))])])]),e("p",{staticClass:"k-item-info"},[t._v(" "+t._s(i.modelCount)+" "+t._s(i.modelCount===1?t.$t("simplify.models.count.singular"):t.$t("simplify.models.count.plural"))+" ")])])])}),0):e("k-empty",{attrs:{icon:"sparkling",layout:"cards"}},[t._v(" "+t._s(t.$t("simplify.providers.empty"))+" ")])],1)])},x=[],O=f(w,S,x,!1,null,null);const T=O.exports,P={name:"ProjectTab",props:{description:{type:String,default:""},placeholder:{type:String,default:""},sourceLanguage:{type:String,default:null}}};var L=function(){var t=this,e=t._self._c;return e("k-grid",{attrs:{variant:"fields"}},[e("k-column",{attrs:{width:"1/1"}},[e("k-textarea-field",{attrs:{label:t.$t("simplify.project.label"),help:t.$t("simplify.project.help"),placeholder:t.placeholder||t.$t("simplify.project.placeholder"),value:t.description,buttons:!1,counter:!1,type:"textarea",size:"small",font:"monospace"},on:{input:function(i){return t.$emit("update:description",i)}}})],1)],1)},F=[],B=f(P,L,F,!1,null,null);const M=B.exports,j={mixins:[{data(){return{systemCheckPerformed:!1}},async mounted(){if((!window.__simplifyLastPath||!window.__simplifyLastPath.includes("/panel/simplify"))&&(window.__simplifySystemCheckDone=!1),window.__simplifyLastPath=window.location.pathname,!window.__simplifySystemCheckDone)try{const s=await this.$api.get("simplify/system/php-cli-check");s.status==="ok"?window.__simplifySystemCheckDone=!0:s.status==="error"&&this.showSystemError(s)}catch(s){s&&s.status==="error"&&this.showSystemError(s)}},methods:{showSystemError(s){const t=s.errors||[];if(t.length===0)return;const e=t[0];let i;typeof e=="object"&&e.key?i=window.panel.$t(e.key,e.data||{}):i=e,window.panel.notification.error(i)}}}],components:{VariantsTab:D,ProvidersTab:T,ProjectTab:M},props:{title:{type:String,default:"Simplify"},tab:{type:String,default:"variants"},data:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})}},data(){return{projectDescription:"",projectPlaceholder:"",currentSourceLanguage:null,savedProjectDescription:""}},computed:{filteredProviders(){const s=this.config.providers||{},t={};for(const[e,i]of Object.entries(s))i.apikey&&i.apikey.trim()!==""&&(t[e]=i);return t},hasVariants(){return(this.data.languageVariants||[]).length>0},tabs(){const s=[{name:"variants",label:this.$t("simplify.languages"),icon:"translate",link:"simplify/variants",badge:0},{name:"providers",label:this.$t("simplify.providers"),icon:"sparkling",link:"simplify/providers",badge:0}];return this.hasVariants&&s.push({name:"project",label:this.$t("simplify.project"),icon:"project",link:"simplify/project",badge:this.projectChangesCount}),s},sourceLanguages(){const s=this.data.languageVariants||[],t=new Set;return s.forEach(i=>{i.source&&t.add(i.source)}),(this.data.siteLanguages||[]).filter(i=>t.has(i.code))},currentSourceLanguageName(){if(!this.currentSourceLanguage)return"";const s=this.sourceLanguages.find(t=>t.code===this.currentSourceLanguage);return s?s.name:""},hasProjectChanges(){return this.projectDescription!==this.savedProjectDescription},projectChangesCount(){return this.projectDescription!==this.savedProjectDescription?1:0},reports(){return this.data.byLanguage?Object.entries(this.data.byLanguage).map(([s,t])=>{const e=this.data.total||1,i=Math.round(t/e*100),a=i>80?"positive":i>50?"notice":"negative";return{label:s,value:`${t} / ${e}`,info:`${i}%`,theme:a}}):[]}},async mounted(){this.sourceLanguages.length>0&&(this.currentSourceLanguage=this.sourceLanguages[0].code),await this.loadProjectData(),this.handleKeyboardShortcut=s=>{(s.metaKey||s.ctrlKey)&&s.key==="s"&&(s.preventDefault(),this.tab==="project"&&this.hasProjectChanges&&this.saveProjectData())},window.addEventListener("keydown",this.handleKeyboardShortcut)},beforeDestroy(){this.handleKeyboardShortcut&&window.removeEventListener("keydown",this.handleKeyboardShortcut)},methods:{async loadProjectData(){if(this.currentSourceLanguage)try{const s=await this.$api.get(`simplify/project/${this.currentSourceLanguage}`);s.success&&(this.projectDescription=s.data.description||"",this.projectPlaceholder=s.data.placeholder||"",this.savedProjectDescription=this.projectDescription)}catch(s){console.error("Failed to load project data:",s)}},async switchSourceLanguage(s){this.currentSourceLanguage=s,await this.loadProjectData()},updateProjectDescription(s){this.projectDescription=s},discardProjectChanges(){this.projectDescription=this.savedProjectDescription},async saveProjectData(){if(this.currentSourceLanguage)try{const s=await this.$api.post(`simplify/project/${this.currentSourceLanguage}/save`,{description:this.projectDescription});s.success?(this.savedProjectDescription=this.projectDescription,this.$panel.notification.success()):this.$panel.notification.error(s.message||this.$t("simplify.project.save.error"))}catch(s){this.$panel.notification.error(this.$t("simplify.error.generic",{message:s.message}))}},mapExistingVariants(s){return s.reduce((t,e)=>(e.source&&e.variant&&(t[e.source]=t[e.source]||[],t[e.source].push(e.variant)),t),{})},filterAvailableSourceLanguages(s,t,e){return s.filter(i=>{const a=t[i.code]||[];if(a.length===0)return!1;const o=e[i.code]||[];return a.length===o.length?!a.every(l=>o.includes(l.variant_code)):!0})},buildLanguageMap(s){return s.reduce((t,e)=>(t[e.code]=e,t),{})},buildSourceOptions(s){return s.map(t=>({value:t.code,text:`${t.name} (${t.code})`}))},openVariantSettings(s){this.$panel.dialog.open({component:"k-form-dialog",props:{fields:{name:{label:this.$t("language.name"),type:"text",required:!0,counter:!1},code:{label:this.$t("language.code"),type:"text",required:!0,disabled:!0},locale:{label:this.$t("language.locale"),type:"text",disabled:!0}},value:{name:s.name,code:s.code,locale:s.locale||""},submitButton:this.$t("save"),cancelButton:this.$t("cancel")},on:{submit:async t=>{try{const e=await this.$api.patch(`languages/${s.code}`,{name:t.name,locale:t.locale});this.$panel.notification.success(),this.$panel.dialog.close(),this.$panel.view.refresh()}catch(e){this.$panel.notification.error(e.message||this.$t("simplify.languages.notification.updateError"))}}}})},openAddVariantDialog(){const s=this.data.siteLanguages||[],t=this.data.languageVariants||[],e=this.data.availableRuleVariants||{},i=this.mapExistingVariants(t),a=this.filterAvailableSourceLanguages(s,e,i);if(a.length===0){this.$panel.notification.error(this.$t("simplify.languages.notification.allVariants"));return}const o=this.buildLanguageMap(s),l=this.buildSourceOptions(a);if(a.length===1){this.openVariantDetailsDialog(a[0].code,i,e,o);return}this.showSourceSelectionDialog(l,c=>this.openVariantDetailsDialog(c,i,e,o))},buildVariantFields(s,t){const e={},i={};if(s.length>1)e.variant={label:this.$t("simplify.languages.dialog.variant"),type:"select",required:!0,options:s.map(a=>{let o=`${a.variant_name} (${a.standard})`;return a.isExisting&&(o+=" ✓"),{value:a.bcp47_tag,text:o,disabled:a.isExisting}}),help:t[0].description},i.variant=t[0].bcp47_tag;else if(t.length===1){const a=t[0];i.variant=a.bcp47_tag,e.variantInfo={label:this.$t("simplify.languages.dialog.variant"),type:"info",text:`${a.variant_name} (${a.standard})`,help:a.description}}return e.name={label:this.$t("language.name"),type:"text",required:!0,icon:"title",help:this.$t("simplify.languages.dialog.nameHelp")},e.code={label:this.$t("language.code"),type:"text",required:!0,icon:"translate",help:this.$t("simplify.languages.dialog.codeHelp")},{fields:e,values:i}},openVariantDetailsDialog(s,t,e,i){const a=i[s];if(!a)return;const o=e[s]||[],l=t[s]||[],r=o.map(n=>({...n,isExisting:l.includes(n.variant_code)})),c=r.filter(n=>!n.isExisting),{fields:d,values:p}=this.buildVariantFields(r,c);if(c.length>0){const n=c[0];p.name=`${n.language} - ${n.variant_name}`,p.code=n.bcp47_tag,p._previousCode=n.bcp47_tag,p._previousName=p.name}else p.name=`${a.name} - ${this.$t("simplify.languages.dialog.defaultNameSuffix")}`,p.code=`${s}-x-ls`,p._previousCode=`${s}-x-ls`,p._previousName=p.name;this.$dialog({component:"k-form-dialog",props:{fields:d,submitButton:this.$t("simplify.languages.dialog.submit"),value:p},on:{input:n=>{if(r.length>1&&n.variant){const h=r.find(u=>u.bcp47_tag===n.variant);h&&((!n._previousName||n.name===n._previousName)&&(n.name=`${h.language} - ${h.variant_name}`,n._previousName=n.name),(!n._previousCode||n.code===n._previousCode)&&(n.code=h.bcp47_tag,n._previousCode=h.bcp47_tag),d.variant&&h.description&&(d.variant.help=h.description))}},submit:async n=>{await this.submitVariantCreation(n,s,a,r)}}})},async submitVariantCreation(s,t,e,i){try{let a=null;if(i&&i.length>0&&s.variant){const r=i.find(c=>c.bcp47_tag===s.variant);r&&(a=r.variant_code)}const o={code:s.code,name:s.name,source:t,locale:e.locale,direction:e.direction,variant:a},l=await this.$api.post("simplify/language/create",o);l.success?window.location.reload():this.$panel.notification.error(l.message||this.$t("simplify.languages.notification.createError"))}catch(a){this.$panel.notification.error(this.$t("simplify.error.generic",{message:a.message}))}},showSourceSelectionDialog(s,t){const e={source:{label:this.$t("simplify.languages.dialog.sourceLabel"),type:"select",required:!0,empty:!1,options:s,help:this.$t("simplify.languages.dialog.sourceHelp")}};this.$dialog({component:"k-form-dialog",props:{fields:e,submitButton:this.$t("simplify.languages.dialog.next"),value:{source:""}},on:{submit:i=>{t(i.source)}}})},async openAddModelDialog(){try{const s=await this.$api.get("simplify/models/available");if(!s.success){this.$panel.notification.error(this.$t("simplify.models.notification.apiUnavailable"));return}const t=s.models,e=s.providers||{},i=[],a=this.config.providers||{};for(const[r,c]of Object.entries(a))c.apikey&&t[r]&&i.push(r);if(i.length===0){this.$panel.notification.error(this.$t("simplify.models.notification.error",{message:"No providers with API keys configured"}));return}if(i.length===1){this.openModelSelectionDialog(i[0],t,e);return}const l=i.map(r=>{var c;return{value:r,text:((c=e[r])==null?void 0:c.name)||r}});this.$dialog({component:"k-form-dialog",props:{fields:{provider_type:{label:this.$t("simplify.models.dialog.provider"),type:"select",options:l,required:!0}},submitButton:this.$t("simplify.languages.dialog.next")},on:{submit:r=>{this.openModelSelectionDialog(r.provider_type,t,e)}}})}catch{this.$panel.notification.error(this.$t("simplify.models.notification.apiUnavailable"))}},async openModelSelectionDialog(s,t,e){const i=t[s]||[],a=this.data.models||{},o=Object.keys(a).filter(n=>n.startsWith(`${s}-`)).map(n=>n.replace(`${s}-`,"")),l=i.filter(n=>!o.includes(n));let r={};try{const n=await this.$api.get(`simplify/models/community-status/${s}`);n.success&&(r=n.status||{})}catch(n){console.warn("Failed to load community status:",n)}const c=l.map(n=>{const h=r[n];let u=n;return h&&h.recommended&&(u=`${n} (${this.$t("simplify.models.status.recommended")})`),{value:n,text:u}});c.push({value:"custom",text:this.$t("simplify.models.dialog.customModel")});const d={model:{label:this.$t("simplify.models.dialog.model"),type:"select",options:c,required:!0,empty:!1},custom_name:{label:this.$t("simplify.models.dialog.customName"),type:"text",counter:!1,when:{model:"custom"}}},p=i.length>0?i[0]:null;if(p&&r[p]){const n=r[p];d.model.help=this.formatCommunityStatusHelp(n)}this.$dialog({component:"k-form-dialog",props:{fields:d,value:{model:c.length>0?c[0].value:null},submitButton:this.$t("simplify.models.dialog.submit")},on:{input:n=>{if(n.model&&n.model!=="custom"){const h=r[n.model];h?d.model.help=this.formatCommunityStatusHelp(h):d.model.help=""}else d.model.help=""},submit:async n=>{await this.addModel(s,n)}}})},formatCommunityStatusHelp(s){const t=this.$t(`simplify.community.status.${s.status}`),e=this.$t(`simplify.community.quality.${s.quality}`);return`${t} ${e}`},async addModel(s,t){try{const e={provider_type:s,model:t.model==="custom"?t.custom_name:t.model,custom_name:t.model==="custom"?t.custom_name:null},i=await this.$api.post("simplify/models/add",e);if(i.success)window.location.reload();else throw new Error(i.message||"Failed to add model")}catch(e){this.$panel.notification.error(this.$t("simplify.models.notification.error",{message:e.message}))}},openDeleteVariantDialog(s){this.$dialog({component:"k-remove-dialog",props:{text:this.$t("simplify.languages.delete.confirm",{name:s.name,code:s.code}),submitButton:this.$t("delete"),icon:"trash"},on:{submit:async()=>{try{await this.$api.delete(`languages/${s.code}`)?window.location.reload():this.$panel.notification.error(this.$t("simplify.languages.notification.deleteError"))}catch(t){this.$panel.notification.error(this.$t("simplify.error.generic",{message:t.message}))}}}})},async openAssignProviderDialog(s){var e;let t=[];try{const i=await this.$api.get("simplify/models");if(i.success&&i.models){const a=i.providerNames||{};t=Object.values(i.models).map(o=>({value:o.config_id,text:`${a[o.provider_type]||o.provider_type}: ${o.model}`}))}}catch(i){this.$panel.notification.error(this.$t("simplify.error.generic",{message:i.message}));return}if(t.length===0){this.$panel.notification.error(this.$t("simplify.models.dialog.noModelsAvailable"));return}this.$panel.dialog.open({component:"k-form-dialog",props:{fields:{model:{label:this.$t("simplify.provider.select"),type:"select",options:t,help:this.$t("simplify.provider.assign.dialog.help"),required:t.length>1||((e=t[0])==null?void 0:e.value)!==""}},value:{model:s.providerModel||""},submitButton:this.$t("simplify.provider.assign.dialog.submit")},on:{submit:async i=>{try{const a=await this.$api.post("simplify/variant/assign-model",{variantCode:s.code,modelConfigId:i.model});a.success?(this.$panel.notification.success(),this.$panel.dialog.close(),window.location.reload()):this.$panel.notification.error(a.message||this.$t("simplify.provider.assign.error"))}catch(a){this.$panel.notification.error(this.$t("simplify.error.generic",{message:a.message}))}}}})},openDeleteModelDialog(s){this.$dialog({component:"k-remove-dialog",props:{text:this.$t("simplify.models.delete.confirm",{model:s.model}),submitButton:this.$t("delete"),icon:"trash"},on:{submit:async()=>{try{const t=await this.$api.delete(`simplify/models/${s.config_id}`);t.success?window.location.reload():this.$panel.notification.error(this.$t("simplify.models.notification.error",{message:t.message||"Failed to delete model"}))}catch(t){this.$panel.notification.error(this.$t("simplify.error.generic",{message:t.message}))}}}})}}};var E=function(){var t=this,e=t._self._c;return e("k-panel-inside",[e("k-view",[e("k-header",{scopedSlots:t._u([{key:"buttons",fn:function(){return[t.tab==="variants"?e("k-button-group",[e("k-button",{attrs:{icon:"add",variant:"filled",size:"sm"},on:{click:t.openAddVariantDialog}},[t._v(" "+t._s(t.$t("simplify.languages.addVariant"))+" ")])],1):t._e(),t.tab==="project"&&t.hasProjectChanges?e("k-button-group",{attrs:{layout:"collapsed"}},[e("k-button",{attrs:{icon:"undo",theme:"notice",variant:"filled",size:"sm"},on:{click:t.discardProjectChanges}},[t._v(" "+t._s(t.$t("discard"))+" ")]),e("k-button",{attrs:{icon:"check",theme:"notice",variant:"filled",size:"sm"},on:{click:t.saveProjectData}},[t._v(" "+t._s(t.$t("save"))+" ")])],1):t._e(),t.tab==="project"&&t.sourceLanguages.length>1?e("div",{staticClass:"k-view-button k-languages-dropdown"},[e("k-button",{attrs:{icon:"translate",variant:"filled",size:"sm",dropdown:!0},on:{click:function(i){return t.$refs.languageDropdown.toggle()}}},[t._v(" "+t._s(t.currentSourceLanguageName)+" ")]),e("k-dropdown-content",{ref:"languageDropdown",attrs:{"align-x":"end",theme:"dark"}},[e("nav",{staticClass:"k-navigate"},t._l(t.sourceLanguages,function(i){return e("button",{key:i.code,staticClass:"k-dropdown-item k-languages-dropdown-item k-button",attrs:{type:"button","data-has-text":"true","aria-current":t.currentSourceLanguage===i.code?"true":void 0,"aria-label":i.name},on:{click:function(a){return t.switchSourceLanguage(i.code)}}},[e("span",{staticClass:"k-button-text"},[t._v(" "+t._s(i.name)+" "),e("span",{staticClass:"k-languages-dropdown-item-info"},[e("span",{staticClass:"k-languages-dropdown-item-code"},[t._v(" "+t._s(i.code.toUpperCase())+" ")])])])])}),0)])],1):t._e()]},proxy:!0}])},[t._v(" "+t._s(t.title)+" ")]),e("nav",{staticClass:"k-tabs"},t._l(t.tabs,function(i){return e("k-link",{key:i.name,staticClass:"k-tabs-button k-button",attrs:{to:i.link,title:i.label,"aria-label":i.label,"aria-current":t.tab===i.name?"true":void 0,"data-variant":"dimmed","data-has-text":"true"}},[e("span",{staticClass:"k-button-icon"},[i.icon?e("k-icon",{attrs:{type:i.icon}}):t._e()],1),e("span",{staticClass:"k-button-text"},[t._v(t._s(i.label))]),i.badge>0?e("span",{staticClass:"k-button-badge",attrs:{"data-theme":"notice"}},[t._v(" "+t._s(i.badge)+" ")]):t._e()])}),1),t.tab==="variants"?e("variants-tab",{attrs:{variants:t.data.languageVariants},on:{"add-variant":t.openAddVariantDialog,"open-settings":t.openVariantSettings,delete:t.openDeleteVariantDialog,"assign-provider":t.openAssignProviderDialog}}):t._e(),t.tab==="providers"?e("providers-tab",{attrs:{providers:t.filteredProviders}}):t._e(),t.tab==="project"?e("project-tab",{attrs:{description:t.projectDescription,placeholder:t.projectPlaceholder,"source-language":t.currentSourceLanguage},on:{"update:description":t.updateProjectDescription}}):t._e()],1)],1)},V=[],R=f(j,E,V,!1,null,null);const I=R.exports,N={name:"PagesTab",props:{stats:{type:Array,default:()=>[]},pages:{type:Array,default:()=>[]},getPageOptions:{type:Function,required:!0},availableTemplates:{type:Array,default:()=>[]},optOutValue:{type:Object,default:()=>({})},variantCode:{type:String,required:!0},isEnabled:{type:Boolean,default:!0}},data(){return{searching:!1,searchQuery:"",sortBy:"title",sortDirection:"asc",pagination:{page:1,limit:100}}},computed:{optOutTemplatesField(){var e;const s=this.availableTemplates.map(i=>{const a=i.count===1?this.$t("simplify.pages.count.singular"):this.$t("simplify.pages.count.plural");return{value:i.value,text:`<span style="display: block;">${i.title}</span><span class="k-text" style="opacity: 0.6; font-size: 0.875em;">${i.count} ${a}</span>`}}),t=(((e=this.optOutValue)==null?void 0:e.opt_out_templates)||[]).length;return{opt_out_templates:{label:this.$t("simplify.privacy.optout.templates.label")+` (${t}/${s.length})`,type:"checkboxes",options:s,counter:!1,help:this.$t("simplify.privacy.optout.templates.help")}}},localOptOutData:{get(){return this.optOutValue},set(s){this.$emit("auto-save-optout",s),this.$emit("update:optOutValue",s)}},columns(){return{title:{label:this.$t("simplify.pages.table.title"),type:"html",width:"3/4",mobile:!0},template:{label:this.$t("simplify.pages.table.template"),type:"html",width:"1/4"},mode:{label:this.$t("simplify.pages.table.mode"),type:"html",width:"50px"}}},filteredPages(){if(!this.searchQuery)return this.pages;const s=this.searchQuery.toLowerCase();return this.pages.filter(t=>t.title.toLowerCase().includes(s)||t.template.toLowerCase().includes(s)||t.mode&&t.mode.toLowerCase().includes(s))},formattedPages(){const s=new Map(this.availableTemplates.map(t=>[t.value,t.title]));return this.filteredPages.map(t=>{const e=s.get(t.template),i=e?`<span class="simplifyTemplate">${e}</span>`:"";return{...t,rawTitle:t.title,title:this.getTitleWithStatus(t),template:i,mode:this.getModeDisplay(t)}})},sortedPages(){const s=[...this.formattedPages];return this.sortBy?s.sort((t,e)=>{let i=this.sortBy==="title"?(t.rawTitle||"").toLowerCase():t[this.sortBy]||"",a=this.sortBy==="title"?(e.rawTitle||"").toLowerCase():e[this.sortBy]||"";return this.sortDirection==="asc"?i.localeCompare(a):a.localeCompare(i)}):s},paginatedPages(){const s=(this.pagination.page-1)*this.pagination.limit,t=this.pagination.limit*this.pagination.page;return this.sortedPages.slice(s,t)},missingPagesCount(){var t;const s=((t=this.optOutValue)==null?void 0:t.opt_out_templates)||[];return this.pages.filter(e=>!(e.mode==="off"||e.template&&s.includes(e.template)||e.hasTranslation)).length},translatedPagesCount(){return this.pages.filter(s=>s.hasTranslation).length},pagesSettingsDropdownOptions(){const s=this,t=[];return t.push({icon:"sparkling",text:this.$t("simplify.pages.translateMissing"),disabled:!this.isEnabled||this.missingPagesCount===0,click(){s.translateMissingPages()}},{icon:"sparkling",text:this.$t("simplify.pages.translateAll"),disabled:!this.isEnabled,click(){s.translateAllPages()}},{icon:"pause",text:this.isEnabled?this.$t("simplify.languages.pause"):this.$t("simplify.languages.resume"),click(){s.$emit("toggle-enabled")}},"-"),t.concat([{icon:"trash",text:this.$t("simplify.pages.deleteAll"),disabled:this.translatedPagesCount===0,click(){s.deleteAllTranslations()}}])}},methods:{getTitleWithStatus(s){const t=s.status||"draft",e={draft:"negative-icon",unlisted:"info-icon",listed:"positive-icon"}[t]||"info-icon",i=this.$t("page.status"),a={draft:this.$t("page.status.draft"),unlisted:this.$t("page.status.unlisted"),listed:this.$t("page.status.listed")}[t]||this.$t("page.status.draft"),o=this.$t("simplify.pages.translationExists"),l=s.hasTranslation?` <span title="${o}" style="display: inline-flex; align-items: center; vertical-align: middle;"><svg aria-hidden="true" data-type="check" class="k-icon" style="color: var(--color-positive); width: 14px; height: 14px;"><use xlink:href="#icon-check"></use></svg></span>`:"";return`<span style="display:flex;align-items:flex-start;gap:var(--spacing-2);">
        <button data-has-icon="true" aria-label="${i}: ${a}" data-size="xs" data-theme="${e}" title="${i}: ${a}" type="button" class="k-button" style="--icon-size: 15px; flex-shrink: 0;">
          <span class="k-button-icon">
            <svg aria-hidden="true" data-type="status-${t}" class="k-icon">
              <use xlink:href="#icon-status-${t}"></use>
            </svg>
          </span>
        </button>
        <span>${s.title}${l}</span>
      </span>`},modeLabel(s){const t=s||"unknown";return(this.$t(`simplify.pages.mode.${t}`)||t).charAt(0).toUpperCase()},getModeDisplay(s){const t=s.mode||"unknown";return t==="auto"&&!this.isEnabled?`<span data-page-uuid="${s.uuid}" style="cursor: pointer; display: flex; align-items: center; justify-content: center; width: 100%; color: var(--color-gray-600);" title="${this.$t("simplify.pages.changeModus")}"><svg aria-hidden="true" data-type="pause" class="k-icon" style="width: 18px; height: 18px;"><use xlink:href="#icon-pause"></use></svg></span>`:`<span class="variant-mode variant-mode--${t}" data-page-uuid="${s.uuid}" style="cursor: pointer; display: inline-flex; align-items: center; justify-content: center;" title="${this.$t("simplify.pages.changeModus")}">${this.modeLabel(t)}</span>`},async toggleSearch(s=!1){var t;if(s&&this.searchQuery){this.searchQuery="";return}this.searching=!this.searching,this.searching?(await this.$nextTick(),(t=this.$refs.search)==null||t.focus()):this.searchQuery=""},onHeader({columnIndex:s}){this.sortBy===s?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=s,this.sortDirection="asc"),this.pagination.page=1},onPaginate({page:s}){this.pagination.page=s},onTableClick(s){const t=s.target.closest(".variant-mode")||s.target.closest("[data-page-uuid]");if(t){const e=t.getAttribute("data-page-uuid"),i=this.pages.find(a=>a.uuid===e);i&&this.$emit("change-mode",i)}},async translateMissingPages(){const s=this.missingPagesCount;s!==0&&this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.pages.translateMissing.confirm",{count:s}),submitButton:this.$t("simplify.pages.translateMissing.submit",{count:s}),cancelButton:this.$t("cancel"),icon:"sparkling",theme:"positive"},on:{submit:async()=>{try{const t=await this.$api.post("simplify/pages/translate-missing",{variantCode:this.variantCode});t.success?(this.$panel.notification.success(this.$t("simplify.pages.translateMissingStarted",{count:t.count})),this.$emit("jobs-added")):this.$panel.notification.error(t.message||this.$t("simplify.pages.queueAddError"))}catch(t){this.$panel.notification.error(this.$t("simplify.pages.queueAddError")+": "+t.message)}this.$panel.dialog.close()}}})},translateAllPages(){const s=this.pages.length;this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.pages.translateAll.confirm",{count:s}),submitButton:this.$t("simplify.pages.translateAll.submit",{count:s}),cancelButton:this.$t("cancel"),icon:"sparkling",theme:"positive"},on:{submit:async()=>{try{const t=await this.$api.post("simplify/pages/translate-all",{variantCode:this.variantCode});t.success?this.$panel.notification.success(this.$t("simplify.pages.translateAllStarted",{count:t.count||s})):this.$panel.notification.error(t.message||this.$t("simplify.pages.queueAddError"))}catch(t){this.$panel.notification.error(this.$t("simplify.pages.queueAddError")+": "+t.message)}this.$panel.dialog.close()}}})},deleteAllTranslations(){const s=this.translatedPagesCount;s!==0&&this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.pages.deleteAll.confirm",{count:s}),submitButton:this.$t("delete"),cancelButton:this.$t("cancel"),icon:"trash",theme:"negative"},on:{submit:async()=>{try{const t=await this.$api.post("simplify/pages/delete-all-translations",{variantCode:this.variantCode});t.success?this.$emit("reload"):this.$panel.notification.error(t.message||this.$t("simplify.pages.deleteAllError"))}catch(t){this.$panel.notification.error(this.$t("simplify.pages.deleteAllError")+": "+t.message)}this.$panel.dialog.close()}}})}}};var A=function(){var t=this,e=t._self._c;return e("section",{staticClass:"simplify-pages-tab"},[t.stats&&t.stats.length?e("div",{staticClass:"k-field"},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(" "+t._s(t.$t("simplify.pages.stats.label"))+" ")])])]),e("dl",{staticClass:"k-stats",staticStyle:{"margin-bottom":"2.5rem"},attrs:{"data-size":"large"}},t._l(t.stats,function(i){return e("div",{key:i.label,staticClass:"k-stat",attrs:{"data-theme":i.theme}},[e("dt",{staticClass:"k-stat-label"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":i.icon}},[e("use",{attrs:{"xlink:href":`#icon-${i.icon}`}})]),t._v(" "+t._s(i.type)+" ")]),e("dd",{staticClass:"k-stat-value",domProps:{innerHTML:t._s(i.value)}}),e("dd",{staticClass:"k-stat-info"},[t._v(t._s(i.label))])])}),0)]):t._e(),e("k-grid",{attrs:{variant:"fields"}},[e("k-column",{attrs:{width:"2/3"}},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(" "+t._s(t.$t("simplify.pages.list.label"))+" "),t.pages.length>0?[t._v(" ("+t._s(t.filteredPages.length)+") ")]:t._e()],2)]),t.pages.length>0?e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[t.searching?e("k-input",{ref:"search",staticClass:"k-models-section-search k-input",staticStyle:{"min-height":"auto",height:"var(--height-xs)","margin-bottom":"0",width:"200px"},attrs:{placeholder:t.$t("filter")+" …",type:"text"},on:{keydown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:t.toggleSearch(!0)}},model:{value:t.searchQuery,callback:function(i){t.searchQuery=i},expression:"searchQuery"}}):t._e(),e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.searching?t.$t("close"):t.$t("filter")},on:{click:t.toggleSearch}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":t.searching?"cancel":"filter"}},[e("use",{attrs:{"xlink:href":t.searching?"#icon-cancel":"#icon-filter"}})])])]),e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.$t("settings")},on:{click:function(i){return t.$refs.pagesSettingsDropdown.toggle()}}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":"cog"}},[e("use",{attrs:{"xlink:href":"#icon-cog"}})])])])],1):t._e()]),t.pages.length>0?e("k-dropdown-content",{ref:"pagesSettingsDropdown",attrs:{options:t.pagesSettingsDropdownOptions,"align-x":"end"}}):t._e(),t.pages.length===0?e("k-empty",{attrs:{text:t.$t("simplify.pages.empty"),icon:"page",layout:"cards"}}):t.filteredPages.length===0?e("k-empty",{attrs:{text:t.$t("simplify.pages.empty"),icon:"page",layout:"cards"}}):[e("k-table",{attrs:{columns:t.columns,rows:t.paginatedPages},on:{header:t.onHeader},nativeOn:{click:function(i){return t.onTableClick.apply(null,arguments)}},scopedSlots:t._u([{key:"header",fn:function({columnIndex:i,label:a}){return[e("span",[t._v(" "+t._s(a)+" "),i===t.sortBy?e("k-icon",{attrs:{type:t.sortDirection==="asc"?"angle-up":"angle-down"}}):t._e()],1)]}},{key:"options",fn:function({row:i}){return[e("k-options-dropdown",{attrs:{options:t.getPageOptions(i)}})]}}])}),e("footer",{staticClass:"k-bar k-collection-footer"},[e("k-pagination",t._b({attrs:{details:!0,total:t.filteredPages.length},on:{paginate:t.onPaginate}},"k-pagination",t.pagination,!1))],1)]],2),e("k-column",{attrs:{width:"1/3"}},[e("k-fieldset",{attrs:{fields:t.optOutTemplatesField},model:{value:t.localOptOutData,callback:function(i){t.localOptOutData=i},expression:"localOptOutData"}})],1)],1)],1)},H=[],q=f(N,A,H,!1,null,null);const U=q.exports,J={name:"PromptTab",props:{value:{type:String,default:""},saved:{type:Object,required:!0},defaults:{type:Object,required:!0}},computed:{systemPromptField(){return{type:"textarea",buttons:!1,counter:!1,size:"large",font:"monospace",help:this.$t("simplify.prompt.help")}},hasCustomPrompt(){return this.saved.ai_system_prompt!==""&&this.saved.ai_system_prompt!==this.defaults.ai_system_prompt}}};var K=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(" "+t._s(t.$t("simplify.prompt.field"))+" ")])]),e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[t.hasCustomPrompt?e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.$t("simplify.prompt.reset")},on:{click:function(i){return t.$emit("reset")}}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":"undo"}},[e("use",{attrs:{"xlink:href":"#icon-undo"}})])])]):t._e()])]),e("k-textarea-field",t._b({attrs:{value:t.value},on:{input:function(i){return t.$emit("update:value",i)}}},"k-textarea-field",t.systemPromptField,!1))],1)},z=[],Z=f(J,K,z,!1,null,null);const Q=Z.exports,W={name:"PrivacyTab",props:{optOutFields:{type:Object,required:!0},optOutValue:{type:Object,default:()=>({})},fieldsFields:{type:Object,required:!0},fieldsValue:{type:Object,default:()=>({})},hasCustomOptOut:{type:Boolean,default:!1},hasCustomFieldInstructions:{type:Boolean,default:!1},maskingFields:{type:Object,required:!0},maskingValue:{type:Object,default:()=>({})}},computed:{optOutFieldsOnly(){return{opt_out_fields:this.optOutFields.opt_out_fields}},optOutFieldTypesOnly(){return{opt_out_fieldtypes:this.optOutFields.opt_out_fieldtypes}},localOptOutData:{get(){return this.optOutValue},set(s){this.$emit("update:optOutValue",s)}},invertedFieldTypesData:{get(){var a;const t=(((a=this.optOutFields.opt_out_fieldtypes)==null?void 0:a.options)||[]).map(o=>o.value),e=this.optOutValue.opt_out_fieldtypes||[];return{opt_out_fieldtypes:t.filter(o=>!e.includes(o))}},set(s){var o;const e=(((o=this.optOutFields.opt_out_fieldtypes)==null?void 0:o.options)||[]).map(l=>l.value),i=s.opt_out_fieldtypes||[],a=e.filter(l=>!i.includes(l));this.$emit("update:optOutValue",{...this.optOutValue,opt_out_fieldtypes:a})}},localFieldsData:{get(){return this.fieldsValue},set(s){this.$emit("update:fieldsValue",s)}},localMaskingData:{get(){return this.maskingValue},set(s){this.$emit("update:maskingValue",s)}}}};var Y=function(){var t=this,e=t._self._c;return e("k-grid",{attrs:{variant:"fields"}},[e("k-column",{attrs:{width:"2/3"}},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(" "+t._s(t.$t("simplify.privacy.fieldtypes.label"))+" ")])]),e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[t.hasCustomFieldInstructions?e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.$t("simplify.instructions.fields.reset")},on:{click:function(i){return t.$emit("reset-fields")}}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":"undo"}},[e("use",{attrs:{"xlink:href":"#icon-undo"}})])])]):t._e()])]),e("k-fieldset",{attrs:{fields:t.optOutFieldTypesOnly},model:{value:t.invertedFieldTypesData,callback:function(i){t.invertedFieldTypesData=i},expression:"invertedFieldTypesData"}}),e("div",{staticStyle:{"margin-top":"2.5rem"}},[e("k-fieldset",{attrs:{fields:t.fieldsFields},model:{value:t.localFieldsData,callback:function(i){t.localFieldsData=i},expression:"localFieldsData"}})],1)],1),e("k-column",{attrs:{width:"1/3"}},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(" "+t._s(t.$t("simplify.privacy.optout.fields.label"))+" ")])]),e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[t.hasCustomOptOut?e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.$t("simplify.privacy.fields.reset")},on:{click:function(i){return t.$emit("reset-optout")}}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":"undo"}},[e("use",{attrs:{"xlink:href":"#icon-undo"}})])])]):t._e()])]),e("k-fieldset",{attrs:{fields:t.optOutFieldsOnly},model:{value:t.localOptOutData,callback:function(i){t.localOptOutData=i},expression:"localOptOutData"}}),e("div",{staticStyle:{"margin-top":"2.5rem"}},[e("k-fieldset",{attrs:{fields:t.maskingFields},model:{value:t.localMaskingData,callback:function(i){t.localMaskingData=i},expression:"localMaskingData"}})],1)],1)],1)},G=[],X=f(W,Y,G,!1,null,null);const tt=X.exports,et={name:"ReportsTab",props:{variantCode:{type:String,required:!0},allPages:{type:Array,required:!0},queueCount:{type:Number,default:0},cacheCount:{type:Number,default:0},reportsCount:{type:Number,default:0}},data(){return{reports:[],runningJobs:[],pendingJobs:[],polling:null,loading:!1,searching:!1,searchQuery:"",sortBy:"date",sortDirection:"desc",pagination:{page:1,limit:50}}},computed:{reportsSettingsDropdownOptions(){const s=this;return[{icon:"trash",text:this.$t("simplify.queue.clear"),disabled:this.queueCount===0,click(){s.$emit("clear-queue")}},{icon:"trash",text:this.$t("simplify.cache.clear"),disabled:this.cacheCount===0,click(){s.$emit("clear-cache")}},"-",{icon:"trash",text:this.$t("simplify.reports.clear"),disabled:this.reportsCount===0,click(){s.confirmClearReports()}}]},columns(){return{page:{label:this.$t("simplify.reports.page"),type:"html",width:"1fr",mobile:!0},date:{label:this.$t("simplify.reports.date"),type:"html",width:"200px"},status:{label:this.$t("simplify.reports.status"),type:"html",width:"60px"},options:{type:"options",width:"auto"}}},filteredReports(){const s=[];if(this.runningJobs.forEach(e=>{s.push({type:"job",status:"processing",timestamp:e.createdAt,jobData:e,message:e.pageTitle})}),this.pendingJobs.forEach(e=>{s.push({type:"job",status:"pending",timestamp:e.createdAt,jobData:e,message:e.pageTitle})}),this.reports.forEach(e=>{s.push({type:"report",...e,message:e.pageTitle||e.message||""})}),!this.searchQuery)return s;const t=this.searchQuery.toLowerCase();return s.filter(e=>(e.message||e.pageTitle||"").toLowerCase().includes(t))},sortedReports(){const s=[...this.filteredReports];return this.sortBy?s.sort((t,e)=>{let i=t.timestamp,a=e.timestamp;return i=new Date(i).getTime(),a=new Date(a).getTime(),this.sortDirection==="asc"?i>a?1:-1:i<a?1:-1}):s},paginatedReports(){const s=this.index-1,t=this.pagination.limit*this.pagination.page;return this.sortedReports.slice(s,t).map(e=>{var u,v,_;if(e.type==="job"){const g=e.jobData,m=(u=this.allPages)==null?void 0:u.find(Et=>Et.title===g.pageTitle);return{itemType:"job",page:this.formatPageWithStatus(g.pageTitle,null,m==null?void 0:m.id,this.variantCode),date:this.formatDate(g.createdAt),status:this.formatStatus(e.status),pageName:g.pageTitle,pageId:m==null?void 0:m.id,pageUuid:m==null?void 0:m.uuid,pageMode:m==null?void 0:m.mode,rawTitle:m==null?void 0:m.title,timestamp:g.createdAt,jobStatus:e.status,jobId:g.id}}const i=e;i.action;const a=i.status||"",o=i.pageTitle||"",l=i.pageUuid||null,r=i.pageId||i.page_id||null,c=i.languageCode||i.language_code||this.variantCode,d=i.tokens||0,p=i.error||"";let n=null;l&&(n=(v=this.allPages)==null?void 0:v.find(g=>g.uuid===l)),n||(n=(_=this.allPages)==null?void 0:_.find(g=>g.title===o));const h=r||(n==null?void 0:n.id);return{itemType:"report",page:this.formatPageWithStatus(o,p,h,c),date:this.formatDate(i.timestamp),status:this.formatStatus(a),tokens:this.formatTokens(d),pageName:o,pageId:h,pageUuid:n==null?void 0:n.uuid,pageMode:n==null?void 0:n.mode,rawTitle:n==null?void 0:n.title,timestamp:i.timestamp,timestampRaw:i.timestampRaw,jobStatus:a,error:p}})},index(){return(this.pagination.page-1)*this.pagination.limit+1}},async mounted(){await this.loadReports(),await this.loadJobs(),this.startPolling()},beforeDestroy(){this.stopPolling()},methods:{toggleSearch(s=!1){if(s){this.searching=!1,this.searchQuery="";return}this.searching=!this.searching,this.searching?this.$nextTick(()=>{var t;(t=this.$refs.search)==null||t.focus()}):this.searchQuery=""},async loadReports(){this.loading=!0;try{const s=await this.$api.get("simplify/reports",{variantCode:this.variantCode});s.success&&(this.reports=s.reports||[])}catch(s){console.error("Failed to load reports:",s),this.$panel.notification.error(this.$t("simplify.reports.loadError"))}finally{this.loading=!1}},async loadJobs(){try{const s=await this.$api.get("simplify/jobs",{variantCode:this.variantCode});s.success&&(this.runningJobs=s.jobs.filter(t=>t.status==="processing"),this.pendingJobs=s.jobs.filter(t=>t.status==="pending"))}catch(s){console.error("Failed to load jobs:",s)}},startPolling(){let s=this.runningJobs.length+this.pendingJobs.length;this.polling=setInterval(async()=>{await this.loadJobs();const t=this.runningJobs.length+this.pendingJobs.length;t<s&&await this.loadReports(),s=t},2e3)},stopPolling(){this.polling&&(clearInterval(this.polling),this.polling=null)},async toggleSearch(s=!1){var t;if(s&&this.searchQuery){this.searchQuery="";return}this.searching=!this.searching,this.searching?(await this.$nextTick(),(t=this.$refs.search)==null||t.focus()):this.searchQuery=""},onHeader({columnIndex:s}){this.sortBy===s?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=s,this.sortDirection="asc"),this.pagination.page=1},onPaginate({page:s}){this.pagination.page=s},formatPageWithStatus(s,t=null,e=null,i=null){var n;const a=(n=this.allPages)==null?void 0:n.find(h=>h.title===s),o=(a==null?void 0:a.status)||"draft",l={draft:"negative-icon",unlisted:"info-icon",listed:"positive-icon"}[o]||"info-icon",r=this.$t("page.status"),c={draft:this.$t("page.status.draft"),unlisted:this.$t("page.status.unlisted"),listed:this.$t("page.status.listed")}[o]||this.$t("page.status.draft"),d=t?`<div class="report-error">${this.escapeHtml(t)}</div>`:"";let p=s;return e&&i&&(p=`<a href="${`pages/${e.replace(/\//g,"+")}?language=${i}`}" style="color: var(--color-blue-600); text-decoration: underline;">${s}</a>`),`<span style="display:flex;align-items:center;gap:var(--spacing-2);">
        <button data-has-icon="true" aria-label="${r}: ${c}" data-size="xs" data-theme="${l}" title="${r}: ${c}" type="button" class="k-button" style="--icon-size: 15px; flex-shrink: 0;">
          <span class="k-button-icon">
            <svg aria-hidden="true" data-type="status-${o}" class="k-icon">
              <use xlink:href="#icon-status-${o}"></use>
            </svg>
          </span>
        </button>
        <div style="flex:1;">
          <div>${p}</div>
          ${d}
        </div>
      </span>`},formatDate(s){return`<span class="date" style="white-space: nowrap;">${new Date(s).toLocaleString(this.$panel.translation.code,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}</span>`},formatMode(s){const t=s==="MANUAL"?"variant-mode--manual":"variant-mode--auto",e=s==="MANUAL"?"simplify.pages.mode.manual":"simplify.pages.mode.auto",i=this.$t(e)||s,a=i.charAt(0).toUpperCase();return`<div style="display: flex; justify-content: center;"><span class="variant-mode ${t}" title="${i}">${a}</span></div>`},formatStatus(s){const t={SUCCESS:{icon:"check",theme:"positive",text:this.$t("simplify.reports.status.success")},FAILED:{icon:"cancel",theme:"negative",text:this.$t("simplify.reports.status.failed")},pending:{icon:"clock",theme:"info",text:this.$t("simplify.reports.status.pending")},processing:{icon:"loader",theme:"notice",text:this.$t("simplify.reports.status.running")},CANCELED:{icon:"cancel",theme:"passive",text:this.$t("simplify.reports.status.canceled")},TIMEOUT:{icon:"timeout",theme:"negative",text:this.$t("simplify.reports.status.timeout")},timeout:{icon:"timeout",theme:"negative",text:this.$t("simplify.reports.status.timeout")}},e=t[s]||t.FAILED;return`<div style="display: flex; justify-content: center; align-items: center;">
        <span title="${e.text}" style="display: inline-flex; align-items: center; cursor: default;">
          <span data-has-icon="true" data-theme="${e.theme}" class="k-button" style="display: flex; align-items: center; justify-content: center; pointer-events: none;">
            <span class="k-button-icon">
              <svg aria-hidden="true" data-type="${e.icon}" class="k-icon">
                <use xlink:href="#icon-${e.icon}"></use>
              </svg>
            </span>
          </span>
        </span>
      </div>`},formatJobMode(s,t){const e=s.isManual===!1?"AUTO":"MANUAL";return this.formatMode(e)},formatTokens(s){const t=parseInt(s,10);return isNaN(t)||t===0?s:t.toLocaleString(this.$panel.translation.code)},getReportOptions(s){const t=s.jobStatus,e=t==="PENDING"||t==="pending",i=t==="RUNNING"||t==="processing",a=t==="FAILED"||t==="failed"||t==="TIMEOUT"||t==="timeout",o=t==="SUCCESS",l=t==="CANCELED";if(!s.pageId)return[{icon:"trash",text:this.$t("simplify.reports.delete"),click:()=>{this.deleteReportEntry(s.timestampRaw)}}];const r=[];return e&&s.itemType==="job"&&(r.push({icon:"open",text:this.$t("open"),click:()=>{window.open(`/${this.variantCode}/${s.pageId}`,"_blank")}}),r.push("-"),r.push({icon:"cancel",text:this.$t("cancel"),click:()=>{this.cancelJob(s.jobId)}})),i&&s.itemType==="job"&&(r.push({icon:"open",text:this.$t("open"),click:()=>{window.open(`/${this.variantCode}/${s.pageId}`,"_blank")}}),r.push("-"),r.push({icon:"cancel",text:this.$t("cancel"),click:()=>{this.cancelJob(s.jobId)}})),a&&s.itemType==="job"&&(r.push({icon:"refresh",text:this.$t("simplify.reports.retry"),click:()=>{this.retryJob(s)}}),r.push("-"),r.push({icon:"trash",text:this.$t("simplify.reports.delete"),click:()=>{this.deleteReportEntry(s.timestampRaw)}})),a&&s.itemType==="report"&&(r.push({icon:"open",text:this.$t("open"),click:()=>{window.open(`/${this.variantCode}/${s.pageId}`,"_blank")}}),r.push("-"),r.push({icon:"refresh",text:this.$t("simplify.reports.retry"),click:()=>{this.retryJob(s)}}),r.push("-"),r.push({icon:"trash",text:this.$t("simplify.reports.delete"),click:()=>{this.deleteReportEntry(s.timestampRaw)}})),l&&s.itemType==="report"&&(r.push({icon:"open",text:this.$t("open"),click:()=>{window.open(`/${this.variantCode}/${s.pageId}`,"_blank")}}),r.push("-"),r.push({icon:"refresh",text:this.$t("simplify.reports.retry"),click:()=>{this.retryJob(s)}}),r.push("-"),r.push({icon:"trash",text:this.$t("simplify.reports.delete"),click:()=>{this.deleteReportEntry(s.timestampRaw)}})),o&&s.itemType==="report"&&(r.push({icon:"open",text:this.$t("open"),click:()=>{window.open(`/${this.variantCode}/${s.pageId}`,"_blank")}}),r.push("-"),r.push({icon:"trash",text:this.$t("simplify.reports.delete"),click:()=>{this.deleteReportEntry(s.timestampRaw)}})),r},async translatePage(s){var e;const t=(e=this.allPages)==null?void 0:e.find(i=>i.id===s.pageId);if(!t){this.$panel.notification.error(this.$t("simplify.reports.retry.pageNotFound",{page:s.pageName}));return}this.$parent.$parent.translateSinglePage&&await this.$parent.$parent.translateSinglePage(t)},async cancelJob(s){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.jobs.cancel.confirm"),submitButton:this.$t("cancel"),cancelButton:this.$t("continue"),icon:"cancel"},on:{submit:async()=>{try{const t=await this.$api.post("simplify/job/cancel",{jobId:s});t.success?(await this.loadJobs(),await this.loadReports()):this.$panel.notification.error(t.message||this.$t("simplify.jobs.cancel.error"))}catch(t){this.$panel.notification.error(this.$t("simplify.jobs.cancel.error")+": "+t.message)}this.$panel.dialog.close()},cancel:()=>{this.$panel.dialog.close()}}})},async retryJob(s){var e,i,a;let t=null;if(s.pageUuid&&(t=(e=this.allPages)==null?void 0:e.find(o=>o.uuid===s.pageUuid)),!t&&s.pageId&&(t=(i=this.allPages)==null?void 0:i.find(o=>o.id===s.pageId)),!t&&s.pageName&&(t=(a=this.allPages)==null?void 0:a.find(o=>o.title===s.pageName)),!t){this.$panel.notification.error(this.$t("simplify.reports.retry.pageNotFound",{page:s.pageName||s.pageId}));return}try{const o=await this.$api.post("simplify/page/translate",{variantCode:this.variantCode,pageId:t.id});o.success?o.status==="already-running"?this.$panel.notification.info(this.$t("simplify.pages.translateRunning",{page:t.rawTitle||t.title})):(await this.loadJobs(),await this.loadReports()):this.$panel.notification.error(o.message||this.$t("simplify.pages.translateError"))}catch(o){this.$panel.notification.error(this.$t("simplify.pages.translateError")+": "+(o.message||o))}},async deleteReportEntry(s){if(!s){this.$panel.notification.error(this.$t("simplify.reports.deleteError"));return}this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.reports.deleteConfirm"),submitButton:this.$t("delete"),cancelButton:this.$t("cancel"),icon:"trash"},on:{submit:async()=>{try{const t=await this.$api.post("simplify/reports/delete",{variantCode:this.variantCode,timestamp:s});t.success?(this.reports=this.reports.filter(e=>e.timestampRaw!==s),this.$panel.dialog.close()):(this.$panel.notification.error(t.message||this.$t("simplify.reports.deleteError")),this.$panel.dialog.close())}catch{this.$panel.notification.error(this.$t("simplify.reports.deleteError")),this.$panel.dialog.close()}}}})},escapeHtml(s){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return s.replace(/[&<>"']/g,e=>t[e])},confirmClearReports(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.reports.clearConfirm"),submitButton:this.$t("simplify.reports.clear"),cancelButton:this.$t("cancel"),icon:"trash"},on:{submit:async()=>{await this.clearReports(),this.$panel.dialog.close()}}})},async clearReports(){try{(await this.$api.post("simplify/reports/clear",{variantCode:this.variantCode})).success&&(this.reports=[],this.$emit("reports-cleared"))}catch{this.$panel.notification.error(this.$t("simplify.reports.clearError"))}}}};var st=function(){var t=this,e=t._self._c;return e("section",{staticClass:"simplify-reports-tab"},[t.reports.length===0&&t.runningJobs.length===0&&t.pendingJobs.length===0?e("k-empty",{attrs:{icon:"stats",layout:"cards"}},[t._v(" "+t._s(t.$t("simplify.reports.empty"))+" ")]):e("div",{staticClass:"k-field"},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(" "+t._s(t.$t("simplify.reports.list.label"))+" ")])]),e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[e("span",{staticClass:"k-counter k-field-counter",attrs:{"data-theme":"positive"}},[e("span",[t._v(t._s(t.filteredReports.length))])]),t.searching?e("k-input",{ref:"search",staticClass:"k-models-section-search k-input",staticStyle:{"min-height":"auto",height:"var(--height-xs)","margin-bottom":"0",width:"200px"},attrs:{placeholder:t.$t("search")+" …",type:"text"},on:{keydown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:t.toggleSearch(!0)}},model:{value:t.searchQuery,callback:function(i){t.searchQuery=i},expression:"searchQuery"}}):t._e(),e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.searching?t.$t("close"):t.$t("filter")},on:{click:t.toggleSearch}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":t.searching?"cancel":"filter"}},[e("use",{attrs:{"xlink:href":t.searching?"#icon-cancel":"#icon-filter"}})])])]),e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.$t("settings")},on:{click:function(i){return t.$refs.reportsSettingsDropdown.toggle()}}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":"cog"}},[e("use",{attrs:{"xlink:href":"#icon-cog"}})])])])],1)]),e("k-dropdown-content",{ref:"reportsSettingsDropdown",attrs:{options:t.reportsSettingsDropdownOptions,"align-x":"end"}}),t.filteredReports.length===0?e("k-empty",{attrs:{icon:"stats",layout:"cards"}},[t._v(" "+t._s(t.$t("simplify.reports.empty"))+" ")]):[e("k-table",{attrs:{columns:t.columns,rows:t.paginatedReports,index:t.index},on:{header:t.onHeader},scopedSlots:t._u([{key:"header",fn:function({columnIndex:i,label:a}){return[e("span",[t._v(" "+t._s(a)+" "),i===t.sortBy?e("k-icon",{attrs:{type:t.sortDirection==="asc"?"angle-up":"angle-down"}}):t._e()],1)]}},{key:"options",fn:function({row:i}){return[e("k-options-dropdown",{attrs:{options:t.getReportOptions(i)}})]}}])}),e("footer",{staticClass:"k-bar k-collection-footer"},[e("k-pagination",t._b({attrs:{details:!0,total:t.filteredReports.length},on:{paginate:t.onPaginate}},"k-pagination",t.pagination,!1))],1)]],2)],1)},it=[],at=f(et,st,it,!1,null,"969c11b0");const ot=at.exports,rt={components:{PagesTab:U,PromptTab:Q,PrivacyTab:tt,ReportsTab:ot},props:{variant:{type:Object,required:!0},variantConfig:{type:Object,default:()=>({})},ruleData:{type:Object,default:null},config:{type:Object,required:!0},tab:{type:String,default:"pages"},allPages:{type:Array,default:()=>[]}},data(){return{formData:{ai_system_prompt:"",opt_out_fields:[],opt_out_templates:[],opt_out_fieldtypes:[],mask_emails:!1,mask_phones:!1},defaults:{ai_system_prompt:"",fieldInstructions:{},opt_out_fields:[],mask_emails:!1,mask_phones:!1},saved:{ai_system_prompt:"",fieldInstructions:{},opt_out_fields:[],opt_out_templates:[],opt_out_fieldtypes:[],mask_emails:!1,mask_phones:!1},availableTemplates:[],usedFieldTypes:[],fieldTypeCategories:null,cachedFieldTypeOptions:[],fieldInstructionsUpdateCounter:0,autoSaveOptOutTimer:null,queueCount:0,cacheCount:0,reportsCount:0}},computed:{promptChangesCount(){let s=0;return this.formData.ai_system_prompt!==this.saved.ai_system_prompt&&s++,s},privacyChangesCount(){let s=0;return this.fieldInstructionsUpdateCounter,JSON.stringify(this.formData.opt_out_fieldtypes)!==JSON.stringify(this.saved.opt_out_fieldtypes)&&s++,this.ruleData&&this.ruleData.field_type_instructions&&Object.keys(this.ruleData.field_type_instructions).forEach(e=>{const i=`field_instruction_${e}`,a=this.formData[i]||"",o=this.saved.fieldInstructions[e]||"";a!==o&&s++}),JSON.stringify(this.formData.opt_out_fields)!==JSON.stringify(this.saved.opt_out_fields)&&s++,this.formData.mask_emails!==this.saved.mask_emails&&s++,this.formData.mask_phones!==this.saved.mask_phones&&s++,s},tabs(){return[{name:"pages",label:this.$t("simplify.pages"),link:`simplify/variants/${this.variant.code}`,icon:"pages"},{name:"prompt",label:this.$t("simplify.prompt"),link:`simplify/variants/${this.variant.code}/prompt`,icon:"prompt",badge:this.promptChangesCount},{name:"privacy",label:this.$t("simplify.privacy"),link:`simplify/variants/${this.variant.code}/privacy`,icon:"privacy",badge:this.privacyChangesCount},{name:"reports",label:this.$t("simplify.reports"),link:`simplify/variants/${this.variant.code}/reports`,icon:"stats"}]},filteredPages(){const s=this.formData.opt_out_templates||[];return this.allPages.filter(t=>t.template?!s.includes(t.template):!0)},pagesStats(){if(!this.ruleData)return[];const s=this.filteredPages.filter(u=>u.mode==="auto"),t=s.length,e=s.filter(u=>u.hasTranslation).length,i=this.filteredPages.filter(u=>u.mode==="manual"),a=i.length,o=i.filter(u=>u.hasTranslation).length,l=this.filteredPages.filter(u=>u.mode==="off").length,r=t+a,c=e+o,d=this.formData.opt_out_templates||[];d.length;const p=this.allPages.filter(u=>u.template&&d.includes(u.template)).length,n=l+p;return[{label:this.$t("simplify.pages.stats.auto"),value:String(e),type:`${t} ${this.$t("simplify.pages.stats.pages")}`,icon:"layers",theme:"positive"},{label:this.$t("simplify.pages.stats.manual"),value:String(o),type:`${a} ${this.$t("simplify.pages.stats.pages")}`,icon:"layers",theme:"notice"},{label:this.$t("simplify.pages.stats.complete"),value:String(c),type:`${r} ${this.$t("simplify.pages.stats.pages")}`,icon:"layers",theme:"info"},{label:this.$t("simplify.pages.stats.excluded"),value:String(n),type:`${this.allPages.length} ${this.$t("simplify.pages.stats.pages")}`,icon:"layers",theme:"negative"}]},fieldInstructionFields(){if(!this.ruleData||!this.ruleData.field_type_instructions)return{};const s=this.formData.opt_out_fieldtypes||[],t=Object.keys(this.ruleData.field_type_instructions),e={};this.usedFieldTypes.forEach(o=>{e[o.type]=o.count});const i=t.filter(o=>{if(s.includes(o))return!1;const l=e[o];return!(l===void 0||l===0)}).sort((o,l)=>o.localeCompare(l)),a={};return i.forEach(o=>{const l=e[o],r=`field_instruction_${o}`;a[r]={label:this.$t(`simplify.fields.instruction.${o}.label`),type:"textarea",help:this.$t(`simplify.fields.instruction.${o}.help`,{count:l}),buttons:!1,font:"monospace"}}),a},optOutFields(){let s=this.cachedFieldTypeOptions;if(s.length===0&&this.ruleData&&this.ruleData.field_type_instructions){const t=Object.keys(this.ruleData.field_type_instructions),e={};this.usedFieldTypes.forEach(a=>{e[a.type]=a.count});const i=a=>{if(!this.fieldTypeCategories)return null;for(const[o,l]of Object.entries(this.fieldTypeCategories))if(l.includes(a))return o;return null};s=t.filter(a=>e[a]!==void 0).sort((a,o)=>a.localeCompare(o)).map(a=>{const o=e[a],l=i(a),r=l?`<span class="field-type-category">${this.$t(`simplify.privacy.fieldtypes.category.${l}`)}</span>`:"";return{value:a,text:`${a.charAt(0).toUpperCase()+a.slice(1)} (${o}×) ${r}`}}),this.cachedFieldTypeOptions=s}return{opt_out_fields:{type:"tags",placeholder:this.$t("simplify.privacy.optout.fields.placeholder"),help:this.$t("simplify.privacy.optout.fields.help")},opt_out_fieldtypes:{type:"checkboxes",options:s,help:this.$t("simplify.privacy.fieldtypes.help")}}},maskingFields(){return{mask_emails:{label:this.$t("simplify.privacy.masking.emails.label"),type:"toggle",help:this.$t("simplify.privacy.masking.emails.help")},mask_phones:{label:this.$t("simplify.privacy.masking.phones.label"),type:"toggle",help:this.$t("simplify.privacy.masking.phones.help")}}},hasCustomFieldInstructions(){return!this.ruleData||!this.ruleData.field_type_instructions?!1:Object.keys(this.ruleData.field_type_instructions).some(t=>{const e=this.saved.fieldInstructions[t]||"",i=this.defaults.fieldInstructions[t]||"";return e!==""&&e!==i})},hasCustomOptOut(){return JSON.stringify(this.saved.opt_out_fields)!==JSON.stringify(this.defaults.opt_out_fields)},hasAnyChanges(){this.fieldInstructionsUpdateCounter;const s=this.formData.ai_system_prompt!==this.saved.ai_system_prompt;let t=!1;this.ruleData&&this.ruleData.field_type_instructions&&(t=Object.keys(this.ruleData.field_type_instructions).some(r=>{const c=`field_instruction_${r}`,d=this.formData[c]||"",p=this.saved.fieldInstructions[r]||"";return d!==p}));const e=JSON.stringify(this.formData.opt_out_fields)!==JSON.stringify(this.saved.opt_out_fields),i=JSON.stringify(this.formData.opt_out_templates)!==JSON.stringify(this.saved.opt_out_templates),a=JSON.stringify(this.formData.opt_out_fieldtypes)!==JSON.stringify(this.saved.opt_out_fieldtypes),o=this.formData.mask_emails!==this.saved.mask_emails||this.formData.mask_phones!==this.saved.mask_phones;return s||t||e||i||a||o}},watch:{ruleData:{handler(s){s&&(this.hasAnyChanges||this.loadRuleData())},immediate:!0}},async mounted(){await this.loadTemplates(),await this.loadFieldTypes(),await this.loadReportsCounts(),this.countsPolling=setInterval(()=>{this.loadReportsCounts()},2e3),this.handleKeyboardShortcut=s=>{(s.metaKey||s.ctrlKey)&&s.key==="s"&&(s.preventDefault(),this.hasAnyChanges&&this.saveAll())},window.addEventListener("keydown",this.handleKeyboardShortcut),this.checkReturnFromEdit()},beforeDestroy(){this.handleKeyboardShortcut&&window.removeEventListener("keydown",this.handleKeyboardShortcut),this.countsPolling&&clearInterval(this.countsPolling)},methods:{async toggleEnabled(){try{const s=await this.$api.post("simplify/variant/toggle-enabled",{variantCode:this.variant.code});s.success&&(this.$set(this.formData,"enabled",s.enabled),this.$set(this.saved,"enabled",s.enabled),this.reloadPage())}catch(s){this.$panel.notification.error(s.message||this.$t("simplify.languages.toggleError"))}},async loadReportsCounts(){try{const s=await this.$api.get("simplify/reports/counts",{variantCode:this.variant.code});s.success&&(this.queueCount=s.queueCount||0,this.cacheCount=s.cacheCount||0,this.reportsCount=s.reportsCount||0)}catch{}},reloadPage(){this.$panel.view.refresh()},handleOptOutUpdate(s){this.$set(this.formData,"opt_out_templates",s.opt_out_templates)},autoSaveOptOut(s){this.$set(this.formData,"opt_out_templates",s.opt_out_templates),this.saved.opt_out_templates=[...s.opt_out_templates],this.autoSaveOptOutTimer&&clearTimeout(this.autoSaveOptOutTimer),this.autoSaveOptOutTimer=setTimeout(async()=>{try{const t=await this.$api.post("simplify/variant/save-optout-templates",{variantCode:this.variant.code,opt_out_templates:this.formData.opt_out_templates||[]});t.success||this.$panel.notification.error(t.message||this.$t("simplify.privacy.optout.templates.saveError"))}catch{this.$panel.notification.error(this.$t("simplify.privacy.optout.templates.saveError"))}},500)},handleClearCache(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.cache.clearConfirm"),submitButton:this.$t("simplify.cache.clear"),cancelButton:this.$t("cancel"),icon:"trash"},on:{submit:async()=>{try{const s=await this.$api.post("simplify/cache/clear",{variantCode:this.variant.code});s.success?await this.loadReportsCounts():this.$panel.notification.error(s.message||this.$t("simplify.cache.clearError"))}catch(s){this.$panel.notification.error(this.$t("simplify.cache.clearError")+": "+s.message)}this.$panel.dialog.close()}}})},handleClearQueue(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.queue.clearConfirm"),submitButton:this.$t("simplify.queue.clear"),cancelButton:this.$t("cancel"),icon:"trash"},on:{submit:async()=>{try{const s=await this.$api.post("simplify/queue/clear",{variantCode:this.variant.code});s.success?(this.$refs.reportsTab&&(await this.$refs.reportsTab.loadJobs(),await this.$refs.reportsTab.loadReports()),await this.loadReportsCounts()):this.$panel.notification.error(s.message||this.$t("simplify.queue.clearError"))}catch(s){this.$panel.notification.error(this.$t("simplify.queue.clearError")+": "+s.message)}this.$panel.dialog.close()}}})},checkReturnFromEdit(){const s=localStorage.getItem("simplify_editing");if(s)try{const t=JSON.parse(s);if(t.variantCode!==this.variant.code)return;const e=Date.now()-t.timestamp,i=600*1e3;if(e>i){localStorage.removeItem("simplify_editing");return}if(!t.wasSaved){localStorage.removeItem("simplify_editing");return}localStorage.removeItem("simplify_editing");const a=this.allPages.find(o=>o.uuid===t.pageUuid);a&&a.mode!=="manual"&&(a.mode="manual",setTimeout(()=>{this.$panel.view.refresh()},500))}catch{localStorage.removeItem("simplify_editing")}},async loadTemplates(){try{const s=await this.$api.get("simplify/templates");s.success&&(this.availableTemplates=s.templates||[])}catch{this.availableTemplates=[]}},async loadFieldTypes(){try{const s=await this.$api.get("simplify/field-types");s.success&&(this.usedFieldTypes=s.fieldTypes||[],this.fieldTypeCategories=s.categories||null)}catch{this.usedFieldTypes=[],this.fieldTypeCategories=null}},loadRuleData(){var e,i,a,o,l;this.defaults.ai_system_prompt=this.ruleData.ai_system_prompt||"";const s=this.ruleData.field_type_instructions||{};this.defaults.fieldInstructions={},Object.keys(s).forEach(r=>{var c;this.defaults.fieldInstructions[r]=((c=s[r])==null?void 0:c.instruction)||""}),this.defaults.opt_out_fields=((e=this.ruleData.privacy)==null?void 0:e.opt_out_fields)||[],this.defaults.mask_emails=((a=(i=this.ruleData.privacy)==null?void 0:i.masking)==null?void 0:a.mask_emails)||!1,this.defaults.mask_phones=((l=(o=this.ruleData.privacy)==null?void 0:o.masking)==null?void 0:l.mask_phones)||!1,this.saved.ai_system_prompt=this.variantConfig.ai_system_prompt||this.defaults.ai_system_prompt;const t=this.variantConfig.field_type_instructions||{};this.saved.fieldInstructions={},Object.keys(s).forEach(r=>{var c;t[r]!==void 0?this.saved.fieldInstructions[r]=((c=t[r])==null?void 0:c.instruction)??"":this.saved.fieldInstructions[r]=this.defaults.fieldInstructions[r]}),this.saved.opt_out_fields=this.variantConfig.opt_out_fields||this.defaults.opt_out_fields,this.saved.opt_out_templates=this.variantConfig.opt_out_templates||this.defaults.opt_out_templates,this.saved.opt_out_fieldtypes=this.variantConfig.opt_out_fieldtypes||[],this.saved.mask_emails=this.variantConfig.mask_emails!==void 0?this.variantConfig.mask_emails:this.defaults.mask_emails,this.saved.mask_phones=this.variantConfig.mask_phones!==void 0?this.variantConfig.mask_phones:this.defaults.mask_phones,this.formData.ai_system_prompt=this.saved.ai_system_prompt,this.formData.enabled=this.variantConfig.enabled!==void 0?this.variantConfig.enabled:!0,this.saved.enabled=this.formData.enabled,Object.keys(this.saved.fieldInstructions).forEach(r=>{const c=`field_instruction_${r}`;this.formData[c]=this.saved.fieldInstructions[r]}),this.formData.opt_out_fields=[...this.saved.opt_out_fields],this.formData.opt_out_templates=[...this.saved.opt_out_templates],this.formData.opt_out_fieldtypes=[...this.saved.opt_out_fieldtypes],this.formData.mask_emails=this.saved.mask_emails,this.formData.mask_phones=this.saved.mask_phones},handleFieldsValueUpdate(s){Object.assign(this.formData,s),this.fieldInstructionsUpdateCounter++},openEditDialog(){this.$panel.dialog.open({component:"k-form-dialog",props:{fields:{name:{label:this.$t("language.name"),type:"text",required:!0,counter:!1},code:{label:this.$t("language.code"),type:"text",disabled:!0},locale:{label:this.$t("language.locale"),type:"text",disabled:!0}},value:{name:this.variant.name,code:this.variant.code,locale:this.variant.locale||""},submitButton:this.$t("save"),cancelButton:this.$t("cancel")},on:{submit:async s=>{try{const t=await this.$api.patch(`languages/${this.variant.code}`,{name:s.name,locale:s.locale});this.$panel.notification.success(),this.$panel.dialog.close(),this.$panel.view.refresh()}catch(t){this.$panel.notification.error(t.message||this.$t("simplify.variant.update.error"))}}}})},async saveAll(s=!1){try{const t={};this.ruleData&&this.ruleData.field_type_instructions&&Object.keys(this.ruleData.field_type_instructions).forEach(i=>{const a=`field_instruction_${i}`;t[i]={enabled:!0,instruction:this.formData[a]||""}});const e=await this.$api.post("simplify/variant/save-all",{variantCode:this.variant.code,ai_system_prompt:this.formData.ai_system_prompt,field_type_instructions:t,privacy:{opt_out_fields:this.formData.opt_out_fields||[],opt_out_templates:this.formData.opt_out_templates||[],opt_out_fieldtypes:this.formData.opt_out_fieldtypes||[],masking:{mask_emails:this.formData.mask_emails||!1,mask_phones:this.formData.mask_phones||!1}}});e.success?(this.saved.ai_system_prompt=this.formData.ai_system_prompt,this.saved.fieldInstructions={},this.ruleData&&this.ruleData.field_type_instructions&&Object.keys(this.ruleData.field_type_instructions).forEach(i=>{const a=`field_instruction_${i}`;this.saved.fieldInstructions[i]=this.formData[a]||""}),this.saved.opt_out_fields=[...this.formData.opt_out_fields],this.saved.opt_out_templates=[...this.formData.opt_out_templates],this.saved.opt_out_fieldtypes=[...this.formData.opt_out_fieldtypes],this.saved.mask_emails=this.formData.mask_emails,this.saved.mask_phones=this.formData.mask_phones,s||this.$panel.notification.success()):s||this.$panel.notification.error(e.message||this.$t("simplify.variant.save.error"))}catch(t){this.$panel.notification.error(this.$t("simplify.error.generic",{message:t.message}))}},discardChanges(){this.formData.ai_system_prompt=this.saved.ai_system_prompt,this.ruleData&&this.ruleData.field_type_instructions&&Object.keys(this.ruleData.field_type_instructions).forEach(s=>{const t=`field_instruction_${s}`;this.formData[t]=this.saved.fieldInstructions[s]||""}),this.formData.opt_out_fields=[...this.saved.opt_out_fields],this.formData.opt_out_templates=[...this.saved.opt_out_templates],this.formData.opt_out_fieldtypes=[...this.saved.opt_out_fieldtypes],this.formData.mask_emails=this.saved.mask_emails,this.formData.mask_phones=this.saved.mask_phones},async resetPrompt(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.restore.prompt.confirm"),submitButton:this.$t("simplify.restore.submit"),cancelButton:this.$t("cancel")},on:{submit:async()=>{try{this.formData.ai_system_prompt=this.defaults.ai_system_prompt,this.saved.ai_system_prompt=this.defaults.ai_system_prompt,await this.saveAll()}catch(s){this.$panel.notification.error(this.$t("simplify.error.generic",{message:s.message}))}this.$panel.dialog.close()}}})},async resetFieldInstructions(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.restore.fields.confirm"),submitButton:this.$t("simplify.restore.submit"),cancelButton:this.$t("cancel")},on:{submit:async()=>{try{this.ruleData&&this.ruleData.field_type_instructions&&Object.keys(this.ruleData.field_type_instructions).forEach(s=>{const t=`field_instruction_${s}`,e=this.defaults.fieldInstructions[s]||"";this.formData[t]=e,this.saved.fieldInstructions[s]=e}),await this.saveAll(),this.fieldInstructionsUpdateCounter++,this.$panel.dialog.close(),this.$panel.view.refresh()}catch(s){this.$panel.notification.error(this.$t("simplify.error.generic",{message:s.message})),this.$panel.dialog.close()}}}})},async resetOptOutFields(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.restore.optout.confirm"),submitButton:this.$t("simplify.restore.submit"),cancelButton:this.$t("cancel")},on:{submit:async()=>{try{this.formData.opt_out_fields=[...this.defaults.opt_out_fields],this.saved.opt_out_fields=[...this.defaults.opt_out_fields],await this.saveAll()}catch(s){this.$panel.notification.error(this.$t("simplify.error.generic",{message:s.message}))}this.$panel.dialog.close()}}})},getPageOptions(s){const t=this.filteredPages.find(i=>i.uuid===s.uuid),e=(t==null?void 0:t.mode)||s.mode;return[{icon:"open",text:this.$t("open"),click:()=>{window.open(`/${this.variant.code}/${s.id}`,"_blank")}},"-",{icon:"edit",text:this.$t("edit"),click:()=>{const i=s.id.replace(/\//g,"+");localStorage.setItem("simplify_editing",JSON.stringify({variantCode:this.variant.code,pageUuid:s.uuid,pageTitle:s.rawTitle||s.title,pageId:s.id,timestamp:Date.now()})),this.$panel.view.open(`pages/${i}?language=${this.variant.code}`)}},{icon:"translate",text:this.$t("simplify.pages.changeModus"),click:()=>{this.openStatusDialog(s)}},{icon:"sparkling",text:this.$t("simplify.pages.translate"),disabled:e!=="manual",click:()=>{e==="manual"&&this.translateSinglePage(s)}},"-",{icon:"trash",text:this.$t("simplify.pages.translation.delete"),disabled:!s.hasTranslation,click:()=>{s.hasTranslation&&this.deleteSingleTranslation(s)}}]},async translateSinglePage(s){try{const t=await this.$api.post("simplify/page/translate",{variantCode:this.variant.code,pageId:s.id});t.success?t.status==="already-running"?this.$panel.notification.info(this.$t("simplify.pages.translateRunning",{page:s.rawTitle||s.title})):(this.$panel.notification.success(this.$t("simplify.pages.translateStarted",{page:s.rawTitle||s.title})),await this.loadReportsCounts(),this.$emit("switch-tab","reports")):this.$panel.notification.error(t.message||this.$t("simplify.pages.translateError"))}catch(t){this.$panel.notification.error(this.$t("simplify.error.generic",{message:t.message}))}},deleteSingleTranslation(s){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.pages.translation.deleteConfirm",{title:s.rawTitle||s.title}),submitButton:this.$t("delete"),cancelButton:this.$t("cancel"),icon:"trash",theme:"negative"},on:{submit:async()=>{try{const t=await this.$api.post("simplify/page/delete-translation",{variantCode:this.variant.code,pageId:s.id});t.success?this.reloadPage():this.$panel.notification.error(t.message||this.$t("simplify.pages.translation.deleteError"))}catch(t){this.$panel.notification.error(this.$t("simplify.pages.translation.deleteError")+": "+t.message)}this.$panel.dialog.close()}}})},openStatusDialog(s){const t=this,e=this.filteredPages.find(a=>a.uuid===s.uuid),i=(e==null?void 0:e.mode)||s.mode||"auto";this.$panel.dialog.open({component:"k-form-dialog",props:{fields:{mode:{label:this.$t("simplify.pages.changeModus"),type:"select",options:[{value:"auto",text:this.$t("simplify.pages.mode.auto")},{value:"manual",text:this.$t("simplify.pages.mode.manual")},{value:"off",text:this.$t("simplify.pages.mode.off")}],empty:!1,required:!0,width:"1/1"}},value:{mode:i},submitButton:this.$t("save")},on:{submit:async a=>{await t.changePageStatus(s,a.mode),t.$panel.dialog.close()}}})},async changePageStatus(s,t){try{const e=await this.$api.post("simplify/page/update-mode",{variantCode:this.variant.code,pageUuid:s.uuid,mode:t});if(e.success){const i=this.filteredPages.find(a=>a.uuid===s.uuid);i&&(i.mode=t)}else this.$panel.notification.error(e.message||this.$t("simplify.pages.mode.changeError"))}catch(e){this.$panel.notification.error(this.$t("simplify.pages.mode.changeErrorWithReason",{error:e.message}))}}}};var nt=function(){var t=this,e=t._self._c;return e("k-panel-inside",[e("k-view",{staticClass:"k-variant-detail-view"},[e("k-header",{attrs:{editable:!0},on:{edit:t.openEditDialog},scopedSlots:t._u([{key:"buttons",fn:function(){return[t.hasAnyChanges?e("k-button-group",{attrs:{layout:"collapsed"}},[e("k-button",{attrs:{icon:"undo",theme:"notice",variant:"filled",size:"sm"},on:{click:t.discardChanges}},[t._v(" "+t._s(t.$t("discard"))+" ")]),e("k-button",{attrs:{icon:"check",theme:"notice",variant:"filled",size:"sm"},on:{click:t.saveAll}},[t._v(" "+t._s(t.$t("save"))+" ")])],1):t._e()]},proxy:!0}])},[t._v(" "+t._s(t.variant.name)+" ")]),t.ruleData?e("nav",{staticClass:"k-tabs"},t._l(t.tabs,function(i){return e("k-link",{key:i.name,staticClass:"k-tabs-button k-button",attrs:{to:i.link,title:i.label,"aria-label":i.label,"aria-current":t.tab===i.name?"true":void 0,"data-variant":"dimmed","data-has-text":"true"}},[e("span",{staticClass:"k-button-icon"},[i.icon?e("k-icon",{attrs:{type:i.icon}}):t._e()],1),e("span",{staticClass:"k-button-text"},[t._v(t._s(i.label))]),i.badge>0?e("span",{staticClass:"k-button-badge",attrs:{"data-theme":"notice"}},[t._v(" "+t._s(i.badge)+" ")]):t._e()])}),1):t._e(),t.ruleData&&t.tab==="pages"?e("pages-tab",{attrs:{stats:t.pagesStats,pages:t.filteredPages,"get-page-options":t.getPageOptions,"available-templates":t.availableTemplates,"opt-out-value":{opt_out_templates:t.formData.opt_out_templates},"variant-code":t.variant.code,"is-enabled":t.formData.enabled!==!1},on:{"update:optOutValue":t.handleOptOutUpdate,"auto-save-optout":t.autoSaveOptOut,"change-mode":t.openStatusDialog,reload:t.reloadPage,"jobs-added":t.loadReportsCounts,"toggle-enabled":t.toggleEnabled}}):t._e(),t.ruleData&&t.tab==="prompt"?e("prompt-tab",{attrs:{value:t.formData.ai_system_prompt,saved:t.saved,defaults:t.defaults},on:{"update:value":i=>t.formData.ai_system_prompt=i,reset:t.resetPrompt}}):t._e(),t.ruleData&&t.tab==="reports"?e("reports-tab",{ref:"reportsTab",attrs:{"variant-code":t.variant.code,"all-pages":t.allPages,"queue-count":t.queueCount,"cache-count":t.cacheCount,"reports-count":t.reportsCount},on:{"reports-cleared":t.loadReportsCounts,"clear-queue":t.handleClearQueue,"clear-cache":t.handleClearCache}}):t._e(),t.ruleData&&t.tab==="privacy"?e("privacy-tab",{attrs:{"opt-out-fields":t.optOutFields,"opt-out-value":t.formData,"has-custom-opt-out":t.hasCustomOptOut,"fields-fields":t.fieldInstructionFields,"fields-value":t.formData,"has-custom-field-instructions":t.hasCustomFieldInstructions,"masking-fields":t.maskingFields,"masking-value":t.formData},on:{"update:optOutValue":i=>Object.assign(t.formData,i),"reset-optout":t.resetOptOutFields,"update:fieldsValue":t.handleFieldsValueUpdate,"reset-fields":t.resetFieldInstructions,"update:maskingValue":i=>Object.assign(t.formData,i)}}):t._e(),t.ruleData?t._e():e("k-box",{attrs:{theme:"notice"}},[e("k-text",[t._v(t._s(t.$t("simplify.rules.configMissing")))])],1)],1)],1)},lt=[],ct=f(rt,nt,lt,!1,null,null);const dt=ct.exports,y={data(){return{defaultCurrency:"USD"}},methods:{formatCost(s,t=!1,e=!1){var o,l;if(s==null)return"?";const i=((l=(o=this.provider)==null?void 0:o.pricing)==null?void 0:l.currency)||"USD",a=new Intl.NumberFormat(this.$panel.translation.code,{minimumFractionDigits:2,maximumFractionDigits:t?2:4}).format(s);return e?`${i} ${a}`:`${a} ${i}`},formatCostValue(s){return s==null?"?":new Intl.NumberFormat(this.$panel.translation.code,{minimumFractionDigits:4,maximumFractionDigits:4}).format(s)},formatNumber(s){return s==null?"0":new Intl.NumberFormat(this.$panel.translation.code).format(s)}}},pt={name:"SettingsTab",mixins:[y],props:{provider:{type:Object,required:!0},providerId:{type:String,required:!0},providerModels:{type:Array,default:()=>[]}},data(){return{apiTestStatus:null}},computed:{maskedApiKey(){var t;if(!((t=this.provider)!=null&&t.apikey))return"–";const s=this.provider.apikey;return s.length<=8?"••••••••":s.substring(0,4)+"••••••••"+s.substring(s.length-4)},apiTestState(){switch(this.apiTestStatus){case"testing":return{icon:"loader",theme:"notice",text:this.$t("simplify.test.action.running")};case"success":return{icon:"check",theme:"positive",text:this.$t("simplify.provider.test.success")};case"error":return{icon:"cancel",theme:"negative",text:this.$t("simplify.provider.test.error")};default:return{icon:"sparkling",theme:"notice",text:this.$t("simplify.providers.test.apikey")}}}},methods:{async testApiKey(){this.apiTestStatus="testing";try{const s=await this.$api.post(`simplify/providers/${this.providerId}/test`,{prompt:"Test"});this.apiTestStatus=s.success?"success":"error",s.success||this.$panel.notification.error(s.message||this.$t("simplify.provider.test.error"))}catch(s){this.apiTestStatus="error",this.$panel.notification.error(s.message||this.$t("simplify.provider.test.error"))}setTimeout(()=>{this.apiTestStatus=null},5e3)},modelDropdownRefKey(s){return`modelDropdown-${s.replace(/\//g,"-")}`},toggleModelOptions(s){var e,i;const t=this.modelDropdownRefKey(s);(i=(e=this.$refs[t])==null?void 0:e[0])==null||i.toggle()},openModel(s){window.location.href=this.$panel.url("simplify/providers/"+this.providerId+"/models/"+s.model)},async openAddModelDialog(){try{const s=await this.$api.get("simplify/models/available");if(!s.success){this.$panel.notification.error(this.$t("simplify.models.notification.apiUnavailable"));return}const e=s.models[this.providerId]||[],i=this.providerModels.map(d=>d.model),a=e.filter(d=>!i.includes(d));let o={};try{const d=await this.$api.get(`simplify/models/community-status/${this.providerId}`);d.success&&(o=d.status||{})}catch(d){console.warn("Failed to load community status:",d)}const l=a.map(d=>{const p=o[d];let n=d;return p&&p.recommended&&(n=`${d} (${this.$t("simplify.models.status.recommended")})`),{value:d,text:n}});l.push({value:"custom",text:this.$t("simplify.models.dialog.customModel")});const r={model:{label:this.$t("simplify.models.dialog.model"),type:"select",options:l,required:!0,empty:!1},model_name:{label:this.$t("simplify.models.dialog.modelName"),type:"text",counter:!1,required:!0,help:this.$t("simplify.models.dialog.modelNameHelp"),when:{model:"custom"}}},c=a.length>0?a[0]:null;if(c&&o[c]){const d=o[c];r.model.help=this.formatCommunityStatusHelp(d)}this.$panel.dialog.open({component:"k-form-dialog",props:{fields:r,value:{model:l.length>0?l[0].value:null},submitButton:this.$t("simplify.models.dialog.submit")},on:{input:d=>{if(d.model&&d.model!=="custom"){const p=o[d.model];p?r.model.help=this.formatCommunityStatusHelp(p):r.model.help=""}else r.model.help=""},submit:async d=>{await this.addModel(d)}}})}catch{this.$panel.notification.error(this.$t("simplify.models.notification.apiUnavailable"))}},formatCommunityStatusHelp(s){const t=this.$t(`simplify.community.status.${s.status}`),e=this.$t(`simplify.community.quality.${s.quality}`);return`${t} ${e}`},async addModel(s){try{const t={provider_type:this.providerId,model:s.model==="custom"?s.model_name:s.model,custom_name:s.model==="custom"?s.model_name:null},e=await this.$api.post("simplify/models/add",t);if(e.success)window.location.reload();else throw new Error(e.message||"Failed to add model")}catch(t){this.$panel.notification.error(this.$t("simplify.models.notification.error",{message:t.message}))}},deleteModel(s){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.models.delete.confirm",{model:s.model}),submitButton:this.$t("delete"),icon:"trash"},on:{submit:async()=>{try{(await this.$api.delete(`simplify/models/${s.config_id}`)).success&&window.location.reload()}catch(t){this.$panel.notification.error(this.$t("simplify.error.generic",{message:t.message}))}}}})}}};var ut=function(){var t=this,e=t._self._c;return e("k-grid",{attrs:{variant:"fields"}},[e("k-column",{attrs:{width:"1/1"}},[e("div",{staticClass:"k-field"},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(t._s(t.$t("simplify.provider.info")))])])]),e("table",{staticClass:"k-table k-object-field-table"},[e("tbody",[t.provider.apikey?e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.provider.apikey"))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("div",{staticClass:"k-provider-apikey-wrapper"},[e("span",{staticStyle:{"padding-inline":"var(--table-cell-padding)","font-family":"var(--code-font-family)"}},[t._v(t._s(t.maskedApiKey))]),e("k-button",{attrs:{icon:t.apiTestState.icon,theme:t.apiTestState.theme,size:"xs"},on:{click:t.testApiKey}},[t._v(" "+t._s(t.apiTestState.text)+" ")])],1)])]):t._e()])])])]),t.providerModels.length>0?e("k-column",{attrs:{width:"1/1"}},[e("div",{staticClass:"k-field"},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(t._s(t.$t("simplify.provider.models.headline")))])])]),e("div",{staticClass:"k-collection"},[e("div",{staticClass:"k-items k-list-items",attrs:{"data-layout":"list","data-size":"medium"}},t._l(t.providerModels,function(i){return e("div",{key:i.config_id,staticClass:"k-item k-list-item",attrs:{"data-has-image":"true","data-layout":"list"}},[t.provider&&t.provider.icon?e("figure",{staticClass:"k-frame k-icon-frame k-item-image",staticStyle:{"--fit":"cover","--ratio":"auto","--back":"var(--color-black)"}},[e("svg",{staticClass:"k-icon",staticStyle:{color:"var(--color-gray)"},attrs:{"aria-hidden":"true","data-type":t.provider.icon}},[e("use",{attrs:{"xlink:href":"#icon-"+t.provider.icon}})])]):t._e(),e("div",{staticClass:"k-item-content"},[e("h3",{staticClass:"k-item-title",attrs:{title:i.model}},[e("a",{staticClass:"k-link",attrs:{href:t.$panel.url("simplify/providers/"+t.providerId+"/models/"+i.model)}},[e("span",[t._v(t._s(i.model))])])])]),e("nav",{staticClass:"k-item-options"},[e("k-button",{staticClass:"k-item-options-button",attrs:{icon:"dots"},on:{click:function(a){return t.toggleModelOptions(i.config_id)}}}),e("k-dropdown-content",{ref:t.modelDropdownRefKey(i.config_id),refInFor:!0,attrs:{alignx:"right"}},[e("k-dropdown-item",{attrs:{icon:"edit"},on:{click:function(a){return t.openModel(i)}}},[t._v(" "+t._s(t.$t("edit"))+" ")]),e("hr"),e("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(a){return t.deleteModel(i)}}},[t._v(" "+t._s(t.$t("delete"))+" ")])],1)],1)])}),0)])])]):t._e()],1)},ht=[],mt=f(pt,ut,ht,!1,null,null);const ft=mt.exports,gt={name:"BudgetTab",mixins:[y],props:{provider:{type:Object,required:!0},providerId:{type:String,required:!0},budgetData:{type:Object,required:!0},savedBudget:{type:Object,required:!0},budgetSummary:{type:Object,default:null}},computed:{dailyBudgetStat(){var d;if(!this.budgetSummary)return null;const s=this.budgetData.dailyBudget||0,t=this.budgetSummary.daily.spent||0;if(s<=0)return{label:this.$t("simplify.provider.budget.daily"),value:this.$t("simplify.provider.budget.disabled"),info:" ",icon:"calendar",theme:"info"};const e=((d=this.provider)==null?void 0:d.provider_currency)||"USD",i=new Intl.NumberFormat(this.$panel.translation.code,{minimumFractionDigits:2,maximumFractionDigits:2}).format(s),a=this.formatCostValue(t),o=Math.max(0,s-t),l=this.formatCost(o,!0),r=Math.round(t/s*100);let c="positive";return t>=s&&(c="negative"),{label:this.$t("simplify.provider.budget.daily"),value:`${a} / ${i} ${e}`,info:`${r}% ${this.$t("simplify.provider.budget.used")} • ${l} ${this.$t("simplify.provider.budget.remaining")}`,icon:"calendar",theme:c}},monthlyBudgetStat(){var d;if(!this.budgetSummary)return null;const s=this.budgetData.monthlyBudget||0,t=this.budgetSummary.monthly.spent||0;if(s<=0)return{label:this.$t("simplify.provider.budget.monthly"),value:this.$t("simplify.provider.budget.disabled"),info:" ",icon:"calendar",theme:"info"};const e=((d=this.provider)==null?void 0:d.provider_currency)||"USD",i=new Intl.NumberFormat(this.$panel.translation.code,{minimumFractionDigits:2,maximumFractionDigits:2}).format(s),a=this.formatCostValue(t),o=Math.max(0,s-t),l=this.formatCost(o,!0),r=Math.round(t/s*100);let c="positive";return t>=s&&(c="negative"),{label:this.$t("simplify.provider.budget.monthly"),value:`${a} / ${i} ${e}`,info:`${r}% ${this.$t("simplify.provider.budget.used")} • ${l} ${this.$t("simplify.provider.budget.remaining")}`,icon:"calendar",theme:c}},hasCustomDailyBudget(){var s,t;return((t=(s=this.budgetSummary)==null?void 0:s.daily)==null?void 0:t.spent)>0},hasCustomMonthlyBudget(){var s,t;return((t=(s=this.budgetSummary)==null?void 0:s.monthly)==null?void 0:t.spent)>0}},methods:{async resetDailyBudget(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.provider.budget.reset.daily.confirm"),submitButton:this.$t("simplify.provider.budget.reset.button"),cancelButton:this.$t("cancel")},on:{submit:async()=>{try{const s=await this.$api.post(`simplify/providers/${this.providerId}/budget/reset`,{periodType:"daily"});s.success?this.$emit("budget-reset"):this.$panel.notification.error(s.message||this.$t("simplify.provider.budget.reset.error"))}catch(s){console.error("Failed to reset budget:",s),this.$panel.notification.error(this.$t("simplify.provider.budget.reset.error"))}this.$panel.dialog.close()}}})},async resetMonthlyBudget(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.provider.budget.reset.monthly.confirm"),submitButton:this.$t("simplify.provider.budget.reset.button"),cancelButton:this.$t("cancel")},on:{submit:async()=>{try{const s=await this.$api.post(`simplify/providers/${this.providerId}/budget/reset`,{periodType:"monthly"});s.success?this.$emit("budget-reset"):this.$panel.notification.error(s.message||this.$t("simplify.provider.budget.reset.error"))}catch(s){console.error("Failed to reset budget:",s),this.$panel.notification.error(this.$t("simplify.provider.budget.reset.error"))}this.$panel.dialog.close()}}})}}};var yt=function(){var i,a;var t=this,e=t._self._c;return e("div",{staticClass:"k-provider-budget"},[e("k-grid",{attrs:{variant:"fields"}},[e("k-column",{attrs:{width:"1/2"}},[t.dailyBudgetStat?e("div",{staticClass:"k-field"},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(t._s(t.$t("simplify.provider.budget.daily")))])]),e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[t.hasCustomDailyBudget?e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.$t("simplify.provider.budget.reset.button")},on:{click:t.resetDailyBudget}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":"undo"}},[e("use",{attrs:{"xlink:href":"#icon-undo"}})])])]):t._e()])]),e("dl",{staticClass:"k-stats",attrs:{"data-size":"large"}},[e("div",{staticClass:"k-stat",attrs:{"data-theme":t.dailyBudgetStat.theme}},[e("dt",{staticClass:"k-stat-label"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":t.dailyBudgetStat.icon}},[e("use",{attrs:{"xlink:href":"#icon-"+t.dailyBudgetStat.icon}})]),t._v(" "+t._s(t.dailyBudgetStat.label)+" ")]),e("dd",{staticClass:"k-stat-value"},[t._v(t._s(t.dailyBudgetStat.value))]),e("dd",{staticClass:"k-stat-info"},[t._v(t._s(t.dailyBudgetStat.info))])])])]):t._e(),e("div",{staticClass:"k-fieldset"},[e("k-grid",{attrs:{variant:"fields"}},[e("k-column",{attrs:{width:"1/1"}},[e("k-field",{staticClass:"k-range-field",staticStyle:{"margin-top":"1.2rem"}},[e("k-input",{attrs:{type:"range",value:t.budgetData.dailyBudget,min:0,max:100,step:1,after:((i=t.provider)==null?void 0:i.provider_currency)||"USD"},on:{input:function(o){t.budgetData.dailyBudget=o}}})],1),e("k-text",{staticClass:"k-help",staticStyle:{"margin-top":"var(--spacing-2)"},attrs:{theme:"help"},domProps:{innerHTML:t._s(t.$t("simplify.provider.budget.dailyBudget.help"))}})],1)],1)],1)]),e("k-column",{attrs:{width:"1/2"}},[t.monthlyBudgetStat?e("div",{staticClass:"k-field"},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(t._s(t.$t("simplify.provider.budget.monthly")))])]),e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[t.hasCustomMonthlyBudget?e("button",{staticClass:"k-button",attrs:{"data-has-icon":"true","data-size":"xs","data-variant":"filled",type:"button",title:t.$t("simplify.provider.budget.reset.button")},on:{click:t.resetMonthlyBudget}},[e("span",{staticClass:"k-button-icon"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":"undo"}},[e("use",{attrs:{"xlink:href":"#icon-undo"}})])])]):t._e()])]),e("dl",{staticClass:"k-stats",attrs:{"data-size":"large"}},[e("div",{staticClass:"k-stat",attrs:{"data-theme":t.monthlyBudgetStat.theme}},[e("dt",{staticClass:"k-stat-label"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":t.monthlyBudgetStat.icon}},[e("use",{attrs:{"xlink:href":"#icon-"+t.monthlyBudgetStat.icon}})]),t._v(" "+t._s(t.monthlyBudgetStat.label)+" ")]),e("dd",{staticClass:"k-stat-value"},[t._v(t._s(t.monthlyBudgetStat.value))]),e("dd",{staticClass:"k-stat-info"},[t._v(t._s(t.monthlyBudgetStat.info))])])])]):t._e(),e("div",{staticClass:"k-fieldset"},[e("k-grid",{attrs:{variant:"fields"}},[e("k-column",{attrs:{width:"1/1"}},[e("k-field",{staticClass:"k-range-field",staticStyle:{"margin-top":"1.2rem"}},[e("k-input",{attrs:{type:"range",value:t.budgetData.monthlyBudget,min:0,max:100,step:1,after:((a=t.provider)==null?void 0:a.provider_currency)||"USD"},on:{input:function(o){t.budgetData.monthlyBudget=o}}})],1),e("k-text",{staticClass:"k-help",staticStyle:{"margin-top":"var(--spacing-2)"},attrs:{theme:"help"},domProps:{innerHTML:t._s(t.$t("simplify.provider.budget.monthlyBudget.help"))}})],1)],1)],1)])],1)],1)},vt=[],_t=f(gt,yt,vt,!1,null,null);const bt=_t.exports,$t={name:"StatsTab",mixins:[y],props:{provider:{type:Object,required:!0},providerId:{type:String,required:!0}},data(){return{stats:null,rawStats:null,statsLoading:!1,statsError:null,selectedPeriod:"month",customFrom:null,customTo:null,currentOffset:0,pagination:{page:1,limit:50},sortBy:"timestamp",sortDirection:"desc",statsSearching:!1,statsSearchQuery:""}},computed:{statsTableColumns(){return{page:{label:this.$t("simplify.provider.stats.table.page"),type:"html",width:"1fr",mobile:!0},timestamp:{label:this.$t("simplify.provider.stats.table.timestamp"),type:"text",width:"175px",mobile:!1},model:{label:this.$t("simplify.provider.stats.table.model"),type:"html",width:"150px",mobile:!1},input_tokens:{label:this.$t("simplify.provider.stats.table.inputTokens"),type:"text",align:"right",width:"80px",mobile:!0},output_tokens:{label:this.$t("simplify.provider.stats.table.outputTokens"),type:"text",align:"right",width:"80px",mobile:!0},total_tokens:{label:this.$t("simplify.provider.stats.table.totalTokens"),type:"text",align:"right",width:"80px",mobile:!0},cost:{label:this.$t("simplify.provider.stats.table.cost"),type:"text",width:"110px",mobile:!1}}},paginationIndex(){return(this.pagination.page-1)*this.pagination.limit+1},filteredCallsRows(){if(!this.statsSearchQuery)return this.recentCallsRows;const s=this.statsSearchQuery.toLowerCase();return this.recentCallsRows.filter(t=>`${t.page} ${t.language} ${t.timestamp}`.toLowerCase().includes(s))},sortedCallsRows(){return this.sortBy?[...this.filteredCallsRows].sort((t,e)=>{let i=t[this.sortBy],a=e[this.sortBy];return!isNaN(i)&&!isNaN(a)&&(i=parseFloat(i.toString().replace(/\./g,"")),a=parseFloat(a.toString().replace(/\./g,""))),this.sortDirection==="asc"?i>a?1:i<a?-1:0:i<a?1:i>a?-1:0}):this.filteredCallsRows},paginatedCallsRows(){const s=this.paginationIndex-1,t=this.pagination.limit*this.pagination.page;return this.sortedCallsRows.slice(s,t)},currentPeriodLabel(){const{from:s,to:t}=this.getCurrentPeriodDates();switch(this.selectedPeriod){case"day":return s.toLocaleDateString(this.$panel.translation.code,{day:"2-digit",month:"long",year:"numeric"});case"month":return s.toLocaleDateString(this.$panel.translation.code,{month:"long",year:"numeric"});case"year":return s.toLocaleDateString(this.$panel.translation.code,{year:"numeric"});case"custom":return this.customFrom&&this.customTo?`${s.toLocaleDateString(this.$panel.translation.code,{day:"2-digit",month:"2-digit",year:"numeric"})} - ${t.toLocaleDateString(this.$panel.translation.code,{day:"2-digit",month:"2-digit",year:"numeric"})}`:this.$t("simplify.provider.stats.period.custom");case"all":default:return this.$t("simplify.provider.stats.period.all")}},periodDropdownOptions(){const t=["all","year","month","day"].map(e=>({text:e==="all"?this.$t("simplify.provider.stats.period.all"):this.$t(e),icon:this.isPeriodSelected(e)?"circle-filled":"circle",current:this.isPeriodSelected(e),click:()=>this.selectPeriod(e)}));return t.push("-"),t.push({text:this.$t("today"),icon:"merge",click:()=>this.jumpToToday()}),t.push({text:this.$t("simplify.provider.stats.period.custom"),icon:"calendar",click:()=>this.openCustomDateDialog()}),t},settingsDropdownOptions(){return[{text:this.$t("simplify.provider.stats.reset"),icon:"trash",click:()=>this.confirmResetStats()}]},canNavigatePrev(){return this.selectedPeriod!=="all"&&this.selectedPeriod!=="custom"},canNavigateNext(){if(this.selectedPeriod==="all"||this.selectedPeriod==="custom")return!1;const s=new Date,t=this.currentOffset;this.currentOffset=t+1;const{from:e}=this.getCurrentPeriodDates();return this.currentOffset=t,e<=s},recentCallsRows(){return!this.rawStats||!this.rawStats.recent_calls?[]:this.rawStats.recent_calls.map(s=>{var r;const t=new Date(s.timestamp*1e3);let e="-";if(s.page_title&&s.page_id){const d=`pages/${s.page_id.replace(/\//g,"+")}?language=${s.language_code}`,p=s.language_code?`<span style="color: var(--color-gray-600); white-space: nowrap; font-style: italic; display: block;">${s.language_code}</span>`:"";e=`<div style="display: block;"><a href="${d}" style="color: var(--color-blue-600); text-decoration: underline; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${s.page_title}</a>${p}</div>`}else if(s.page_id){const d=`pages/${s.page_id.replace(/\//g,"+")}?language=${s.language_code}`,p=s.language_code?`<span style="color: var(--color-gray-600); white-space: nowrap; font-style: italic; display: block;">${s.language_code}</span>`:"";e=`<div style="display: block;"><a href="${d}" style="color: var(--color-blue-600); text-decoration: underline; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${s.page_id}</a>${p}</div>`}else if(s.context){const c=`simplify.provider.stats.context.${s.context}`;e=this.$t(c)}const i=s.input_tokens||0,a=s.output_tokens||0,o=i+a,l=s.cost;return{timestamp:t.toLocaleString(this.$panel.translation.code,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),page:e,model:s.model?`<span title="${s.model}">${s.model}</span>`:"-",cost:`${this.formatCostValue(l!==null?l:0)} ${((r=this.provider)==null?void 0:r.provider_currency)||"USD"}`,input_tokens:this.formatNumber(i),output_tokens:this.formatNumber(a),total_tokens:this.formatNumber(o)}})}},async mounted(){await this.loadStats()},methods:{toggleStatsSearch(s=!1){if(s){this.statsSearching=!1,this.statsSearchQuery="";return}this.statsSearching=!this.statsSearching,this.statsSearching?this.$nextTick(()=>{var t;(t=this.$refs.statsSearch)==null||t.focus()}):this.statsSearchQuery=""},async loadStats(){this.statsLoading=!0,this.statsError=null;const{from:s,to:t}=this.getCurrentPeriodDates();try{const e={period:this.selectedPeriod};(this.currentOffset!==0||this.selectedPeriod==="custom")&&(e.from=Math.floor(s.getTime()/1e3),e.to=Math.floor(t.getTime()/1e3));const i=await this.$api.get(`simplify/providers/${this.providerId}/stats`,e);i.success?(this.stats=i.stats,this.rawStats=i.rawStats):this.statsError=i.message||this.$t("simplify.provider.stats.error")}catch(e){console.error("Failed to load stats:",e),this.statsError=this.$t("simplify.provider.stats.error")}finally{this.statsLoading=!1}},isPeriodSelected(s){return this.selectedPeriod===s},selectPeriod(s){this.selectedPeriod=s,this.currentOffset=0,this.customFrom=null,this.customTo=null,this.loadStats()},jumpToToday(){this.selectedPeriod="day",this.currentOffset=0,this.customFrom=null,this.customTo=null,this.loadStats()},openCustomDateDialog(){this.$panel.dialog.open({component:"k-form-dialog",props:{size:"small",fields:{from:{label:this.$t("from"),type:"date",time:!1,required:!0},to:{label:this.$t("to"),type:"date",time:!1,required:!0}},submitButton:this.$t("apply"),value:{from:this.customFrom||new Date().toISOString().split("T")[0],to:this.customTo||new Date().toISOString().split("T")[0]}},on:{submit:s=>{this.selectedPeriod="custom",this.customFrom=s.from,this.customTo=s.to,this.currentOffset=0,this.loadStats(),this.$panel.dialog.close()}}})},getCurrentPeriodDates(){const s=new Date;let t,e;switch(this.selectedPeriod){case"day":t=new Date(s.getFullYear(),s.getMonth(),s.getDate()),t.setDate(t.getDate()+this.currentOffset),e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59);break;case"month":t=new Date(s.getFullYear(),s.getMonth(),1),t.setMonth(t.getMonth()+this.currentOffset),e=new Date(t.getFullYear(),t.getMonth()+1,0,23,59,59);break;case"year":t=new Date(s.getFullYear(),0,1),t.setFullYear(t.getFullYear()+this.currentOffset),e=new Date(t.getFullYear(),11,31,23,59,59);break;case"custom":this.customFrom&&this.customTo?(t=new Date(this.customFrom),e=new Date(this.customTo),e.setHours(23,59,59,999)):(t=new Date,e=new Date);break;default:t=new Date(0),e=new Date}return{from:t,to:e}},navigatePeriod(s){if(this.selectedPeriod==="all")return;const t=s==="prev"?-1:1,e=this.currentOffset+t,i=this.currentOffset;this.currentOffset=e;const{from:a}=this.getCurrentPeriodDates();if(s==="next"&&a>new Date){this.currentOffset=i;return}this.loadStats()},async confirmResetStats(){this.$panel.dialog.open({component:"k-remove-dialog",props:{text:this.$t("simplify.provider.stats.reset.confirm"),submitButton:this.$t("simplify.provider.stats.reset.button"),cancelButton:this.$t("cancel")},on:{submit:async()=>{try{const s=await this.$api.post(`simplify/providers/${this.providerId}/stats/reset`);s.success?await this.loadStats():this.$panel.notification.error(s.message||this.$t("simplify.provider.stats.reset.error"))}catch(s){console.error("Failed to reset stats:",s),this.$panel.notification.error(this.$t("simplify.provider.stats.reset.error"))}this.$panel.dialog.close()}}})},handlePaginate(s){this.pagination.page=s.page},onTableHeader({columnIndex:s}){this.sortBy===s?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=s,this.sortDirection="desc"),this.pagination.page=1}}};var kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"k-provider-stats"},[e("div",{staticClass:"k-field"},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(t._s(t.$t("simplify.provider.stats.box.headline")))])]),e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[e("k-button-group",{attrs:{layout:"collapsed"}},[e("k-button",{attrs:{dropdown:"",text:t.currentPeriodLabel,icon:"calendar",size:"sm",variant:"filled"},on:{click:function(i){return t.$refs.periodDropdown.toggle()}}}),e("k-dropdown-content",{ref:"periodDropdown",attrs:{options:t.periodDropdownOptions,"align-x":"end"}}),e("k-button",{attrs:{icon:"angle-left",size:"sm",variant:"filled",disabled:!t.canNavigatePrev},on:{click:function(i){return t.navigatePeriod("prev")}}}),e("k-button",{attrs:{icon:"angle-right",size:"sm",variant:"filled",disabled:!t.canNavigateNext},on:{click:function(i){return t.navigatePeriod("next")}}})],1)],1)]),t.stats&&t.stats.length?e("dl",{staticClass:"k-stats",staticStyle:{"margin-bottom":"2.5rem"},attrs:{"data-size":"large"}},t._l(t.stats,function(i){return e("div",{key:i.label,staticClass:"k-stat",attrs:{"data-theme":i.theme}},[e("dt",{staticClass:"k-stat-label"},[e("svg",{staticClass:"k-icon",attrs:{"aria-hidden":"true","data-type":i.icon}},[e("use",{attrs:{"xlink:href":"#icon-"+i.icon}})]),t._v(" "+t._s(i.label)+" ")]),e("dd",{staticClass:"k-stat-value"},[t._v(t._s(i.value))]),e("dd",{staticClass:"k-stat-info"},[t._v(t._s(i.info))])])}),0):t._e()]),t.statsError?e("k-text",{staticStyle:{"margin-top":"2rem",color:"var(--color-red)"}},[t._v(" "+t._s(t.statsError)+" ")]):t._e(),e("div",{staticClass:"k-field",staticStyle:{"margin-top":"2rem"}},[t.rawStats&&t.rawStats.recent_calls&&t.rawStats.recent_calls.length>0?e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(t._s(t.$t("simplify.provider.stats.recentCalls.label",{count:t.filteredCallsRows.length,period:t.currentPeriodLabel})))])]),e("div",{staticStyle:{display:"flex",gap:"var(--spacing-2)","align-items":"center"}},[t.statsSearching?e("k-input",{ref:"statsSearch",staticClass:"k-models-section-search k-input stats-search-input",staticStyle:{"min-height":"auto",height:"var(--height-sm)","margin-bottom":"0",width:"200px"},attrs:{placeholder:t.$t("search")+" …",type:"text"},on:{keydown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:t.toggleStatsSearch(!0)}},model:{value:t.statsSearchQuery,callback:function(i){t.statsSearchQuery=i},expression:"statsSearchQuery"}}):t._e(),e("k-button",{attrs:{icon:t.statsSearching?"cancel":"filter",size:"sm",variant:"filled"},on:{click:function(i){return t.toggleStatsSearch()}}}),e("k-button",{attrs:{icon:"cog",size:"sm",variant:"filled"},on:{click:function(i){return t.$refs.settingsDropdown.toggle()}}}),e("k-dropdown-content",{ref:"settingsDropdown",attrs:{options:t.settingsDropdownOptions,"align-x":"end"}})],1)]):t._e(),t.filteredCallsRows.length>0?e("k-table",{attrs:{index:t.paginationIndex,columns:t.statsTableColumns,rows:t.paginatedCallsRows},on:{header:t.onTableHeader},scopedSlots:t._u([{key:"header",fn:function({columnIndex:i,label:a}){return[e("span",{staticClass:"k-table-header-sortable"},[t._v(" "+t._s(a)+" "),i===t.sortBy?e("k-icon",{attrs:{type:t.sortDirection==="asc"?"angle-up":"angle-down"}}):t._e()],1)]}}],null,!1,2438092756)}):e("k-empty",{attrs:{icon:"apicall",layout:"cards"}},[t._v(" "+t._s(t.statsSearchQuery?t.$t("search")+": "+t.$t("search.results.none"):t.$t("simplify.provider.stats.box.apiCalls.empty"))+" ")]),t.filteredCallsRows.length>0?e("footer",[e("k-pagination",{attrs:{details:!0,total:t.filteredCallsRows.length,page:t.pagination.page,limit:t.pagination.limit},on:{paginate:t.handlePaginate}})],1):t._e()],1)],1)},Ct=[],Dt=f($t,kt,Ct,!1,null,null);const wt=Dt.exports,St={components:{SettingsTab:ft,BudgetTab:bt,StatsTab:wt},props:{providerId:{type:String,required:!0},providerData:{type:Object,default:null},providerModels:{type:Array,default:()=>[]},tab:{type:String,default:"ratelimit"}},data(){return{provider:this.providerData,budgetData:{dailyBudget:0,monthlyBudget:0},savedBudget:{dailyBudget:0,monthlyBudget:0},apiTestStatus:null,budgetSummary:null,budgetLoading:!1}},computed:{tabs(){return this.provider?[{name:"settings",label:this.$t("simplify.provider.tabs.settings"),link:`simplify/providers/${this.providerId}`,icon:"settings",badge:0},{name:"budget",label:this.$t("simplify.provider.tabs.budget"),link:`simplify/providers/${this.providerId}/budget`,icon:"cart",badge:this.budgetChangesCount,theme:"notice"},{name:"stats",label:this.$t("simplify.provider.tabs.stats"),link:`simplify/providers/${this.providerId}/stats`,icon:"chart",badge:0}]:[]},hasChanges(){return this.budgetData.dailyBudget!==this.savedBudget.dailyBudget||this.budgetData.monthlyBudget!==this.savedBudget.monthlyBudget},budgetChangesCount(){let s=0;return this.budgetData.dailyBudget!==this.savedBudget.dailyBudget&&s++,this.budgetData.monthlyBudget!==this.savedBudget.monthlyBudget&&s++,s}},async mounted(){await this.loadProvider(),await this.loadBudgetSummary(),this.tab==="stats"&&await this.loadStats(),this.handleKeyboardShortcut=s=>{(s.metaKey||s.ctrlKey)&&s.key==="s"&&(s.preventDefault(),this.hasChanges&&this.saveChanges())},window.addEventListener("keydown",this.handleKeyboardShortcut)},beforeDestroy(){this.handleKeyboardShortcut&&window.removeEventListener("keydown",this.handleKeyboardShortcut)},methods:{async loadProvider(){var s,t,e,i;try{const a=await this.$api.get(`simplify/provider/${this.providerId}`);if(a.success){const o=(s=this.provider)==null?void 0:s.displayName,l=(t=this.provider)==null?void 0:t.icon;this.provider=a.provider,o&&(this.provider.displayName=o),l&&(this.provider.icon=l),this.budgetData={dailyBudget:((e=a.settings)==null?void 0:e.dailyBudget)||0,monthlyBudget:((i=a.settings)==null?void 0:i.monthlyBudget)||0},this.savedBudget={...this.budgetData}}}catch(a){console.error("Failed to load provider:",a),this.$panel.notification.error(this.$t("simplify.provider.loadError"))}},async saveChanges(){try{const s=await this.$api.post(`simplify/provider/${this.providerId}/settings`,{dailyBudget:parseFloat(this.budgetData.dailyBudget)||0,monthlyBudget:parseFloat(this.budgetData.monthlyBudget)||0});s.success?(this.savedBudget={...this.budgetData},await this.loadBudgetSummary(),this.$panel.notification.success()):this.$panel.notification.error(s.message||this.$t("simplify.provider.saveError"))}catch(s){console.error("Failed to save provider settings:",s),this.$panel.notification.error(this.$t("simplify.provider.saveError"))}},discardChanges(){this.budgetData={...this.savedBudget}},async handleBudgetReset(){await this.loadProvider(),await this.loadBudgetSummary()},async loadBudgetSummary(){this.budgetLoading=!0;try{const s=await this.$api.get(`simplify/providers/${this.providerId}/budget`);s.success&&(this.budgetSummary=s.summary)}catch(s){console.error("Failed to load budget summary:",s)}finally{this.budgetLoading=!1}}}};var xt=function(){var t=this,e=t._self._c;return e("k-panel-inside",[e("k-view",[e("k-header",{scopedSlots:t._u([{key:"buttons",fn:function(){return[t.tab==="settings"?e("k-button-group",[e("k-button",{attrs:{icon:"add",variant:"filled",size:"sm"},on:{click:function(i){return t.$refs.settingsTab.openAddModelDialog()}}},[t._v(" "+t._s(t.$t("simplify.models.add"))+" ")])],1):t._e(),t.hasChanges&&(t.tab==="settings"||t.tab==="budget")?e("k-button-group",{attrs:{layout:"collapsed"}},[e("k-button",{attrs:{icon:"undo",theme:"notice",variant:"filled",size:"sm"},on:{click:t.discardChanges}},[t._v(" "+t._s(t.$t("discard"))+" ")]),e("k-button",{attrs:{icon:"check",theme:"notice",variant:"filled",size:"sm"},on:{click:t.saveChanges}},[t._v(" "+t._s(t.$t("save"))+" ")])],1):t._e()]},proxy:!0}])},[t._v(" "+t._s(t.provider?t.provider.displayName:"")+" ")]),t.provider?e("nav",{staticClass:"k-tabs"},t._l(t.tabs,function(i){return e("k-link",{key:i.name,staticClass:"k-tabs-button k-button",attrs:{to:i.link,title:i.label,"aria-label":i.label,"aria-current":t.tab===i.name?"true":void 0,"data-variant":"dimmed","data-has-text":"true"}},[e("span",{staticClass:"k-button-icon"},[i.icon?e("k-icon",{attrs:{type:i.icon}}):t._e()],1),e("span",{staticClass:"k-button-text"},[t._v(t._s(i.label))]),i.badge>0?e("span",{staticClass:"k-button-badge",attrs:{"data-theme":i.theme||"notice"}},[t._v(" "+t._s(i.badge)+" ")]):t._e()])}),1):t._e(),t.tab==="settings"?e("settings-tab",{ref:"settingsTab",attrs:{provider:t.provider,"provider-id":t.providerId,"provider-models":t.providerModels}}):t._e(),t.tab==="budget"?e("budget-tab",{attrs:{provider:t.provider,"provider-id":t.providerId,"budget-data":t.budgetData,"saved-budget":t.savedBudget,"budget-summary":t.budgetSummary},on:{"budget-reset":t.handleBudgetReset}}):t._e(),t.tab==="stats"?e("stats-tab",{attrs:{provider:t.provider,"provider-id":t.providerId}}):t._e()],1)],1)},Ot=[],Tt=f(St,xt,Ot,!1,null,null);const Pt=Tt.exports,Lt={props:{providerId:{type:String,required:!0},providerData:{type:Object,default:null},tab:{type:String,default:"settings"}},data(){return{model:this.providerData||null,formData:{pricing:{input:null,output:null,per_tokens:null}},savedData:{pricing:{input:null,output:null,per_tokens:null}}}},computed:{modelUrl(){var s;return((s=this.model)==null?void 0:s.url)||null},providerUrl(){var s;return((s=this.model)==null?void 0:s.provider_url)||null},hasCommunityData(){var s;return((s=this.model)==null?void 0:s.github_status)!==void 0},pricingFields(){return{input:{label:this.$t("simplify.model.pricing.input"),type:"number",step:.01,min:0,placeholder:"0.00",width:"1/4",help:this.$t("simplify.model.pricing.input.help")},output:{label:this.$t("simplify.model.pricing.output"),type:"number",step:.01,min:0,placeholder:"0.00",width:"1/4",help:this.$t("simplify.model.pricing.output.help")},per_tokens:{label:this.$t("simplify.model.pricing.per_tokens"),type:"number",step:1e5,placeholder:"1000000",width:"1/4",help:this.$t("simplify.model.pricing.per_tokens.help")}}},pricingData:{get(){return this.formData.pricing},set(s){this.formData.pricing=s}},hasChanges(){return JSON.stringify(this.formData.pricing)!==JSON.stringify(this.savedData.pricing)}},async mounted(){await this.loadModel(),this.handleKeyboardShortcut=s=>{(s.metaKey||s.ctrlKey)&&s.key==="s"&&(s.preventDefault(),this.hasChanges&&this.saveChanges())},window.addEventListener("keydown",this.handleKeyboardShortcut)},beforeDestroy(){this.handleKeyboardShortcut&&window.removeEventListener("keydown",this.handleKeyboardShortcut)},methods:{async loadModel(){var s,t,e;try{const i=await this.$api.get(`simplify/models/${this.providerId}`);if(i.success&&i.provider){const a=JSON.parse(JSON.stringify(i.provider));this.model=a,this.formData.pricing={input:((s=a.pricing)==null?void 0:s.input)??null,output:((t=a.pricing)==null?void 0:t.output)??null,per_tokens:((e=a.pricing)==null?void 0:e.per_tokens)??null},this.savedData=JSON.parse(JSON.stringify(this.formData))}}catch(i){console.error("Failed to load model:",i);const a=(i==null?void 0:i.message)||this.$t("simplify.model.loadError");this.$panel.notification.error(a)}},async saveChanges(){try{const s=await this.$api.patch(`simplify/models/${this.providerId}`,{pricing:{input:parseFloat(this.formData.pricing.input),output:parseFloat(this.formData.pricing.output),per_tokens:parseInt(this.formData.pricing.per_tokens)}});s.success?(this.savedData=JSON.parse(JSON.stringify(this.formData)),this.$panel.notification.success()):this.$panel.notification.error(s.message||this.$t("simplify.model.saveError"))}catch(s){console.error("Failed to save model:",s);const t=(s==null?void 0:s.message)||this.$t("simplify.model.saveError");this.$panel.notification.error(t)}},discardChanges(){this.formData=JSON.parse(JSON.stringify(this.savedData))}}};var Ft=function(){var t=this,e=t._self._c;return e("k-panel-inside",[e("k-view",{staticClass:"k-model-detail-view"},[e("k-header",{scopedSlots:t._u([{key:"buttons",fn:function(){return[t.hasChanges?e("k-button-group",{attrs:{layout:"collapsed"}},[e("k-button",{attrs:{icon:"undo",theme:"notice",variant:"filled",size:"sm"},on:{click:t.discardChanges}},[t._v(" "+t._s(t.$t("discard"))+" ")]),e("k-button",{attrs:{icon:"check",theme:"notice",variant:"filled",size:"sm"},on:{click:t.saveChanges}},[t._v(" "+t._s(t.$t("save"))+" ")])],1):t._e()]},proxy:!0}])},[t._v(" "+t._s(t.model?t.model.model:"")+" ")]),e("k-grid",{attrs:{variant:"fields"}},[t.hasCommunityData?e("k-column",{attrs:{width:"1/1"}},[e("div",{staticClass:"k-field"},[e("header",{staticClass:"k-field-header"},[e("label",{staticClass:"k-label k-field-label"},[e("span",{staticClass:"k-label-text"},[t._v(t._s(t.$t("simplify.model.details")))])])]),e("table",{staticClass:"k-table k-object-field-table simplify-model"},[e("tbody",[e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.status"))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("span",{staticStyle:{"padding-inline":"var(--table-cell-padding)"}},[t._v(t._s(t.$t(`simplify.community.status.${t.model.github_status||"unknown"}`)))])])]),e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.quality"))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("span",{staticStyle:{"padding-inline":"var(--table-cell-padding)"}},[t.model.github_quality>0?e("span",{staticClass:"k-quality-stars"},[e("span",{staticClass:"filled"},[t._v(t._s("★".repeat(t.model.github_quality)))]),e("span",{staticClass:"empty"},[t._v(t._s("☆".repeat(5-t.model.github_quality)))])]):t._e(),t._v(" "+t._s(t.$t(`simplify.community.quality.${t.model.github_quality||0}`))+" ")])])]),e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.temperature"))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("span",{staticStyle:{"padding-inline":"var(--table-cell-padding)"}},[t._v(t._s(t.model.github_temperature?t.$t("yes"):t.$t("no")))])])]),t.model.github_output_token_limit?e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.outputTokenLimit"))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("span",{staticStyle:{"padding-inline":"var(--table-cell-padding)"}},[t._v(t._s(t.model.github_output_token_limit.toLocaleString()))])])]):t._e(),t.modelUrl?e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.documentation"))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("span",{staticStyle:{"padding-inline":"var(--table-cell-padding)"}},[e("a",{staticStyle:{color:"var(--color-blue-600)","text-decoration":"underline"},attrs:{href:t.modelUrl,target:"_blank",rel:"noopener noreferrer"}},[t._v(" "+t._s(t.modelUrl)+" ")])])])]):t._e(),e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.pricing.input",{tokens:(t.formData.pricing.per_tokens||1e6).toLocaleString()}))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("div",[e("k-input",{attrs:{type:"number",value:t.formData.pricing.input,placeholder:t.pricingFields.input.placeholder,step:t.pricingFields.input.step,min:t.pricingFields.input.min,before:t.model.provider_currency||"USD"},on:{input:function(i){t.formData.pricing.input=i}}})],1)])]),e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.pricing.output",{tokens:(t.formData.pricing.per_tokens||1e6).toLocaleString()}))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("div",[e("k-input",{attrs:{type:"number",value:t.formData.pricing.output,placeholder:t.pricingFields.output.placeholder,step:t.pricingFields.output.step,min:t.pricingFields.output.min,before:t.model.provider_currency||"USD"},on:{input:function(i){t.formData.pricing.output=i}}})],1)])]),e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.pricing.per_tokens"))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("div",[e("k-input",{attrs:{type:"number",value:t.formData.pricing.per_tokens,placeholder:t.pricingFields.per_tokens.placeholder,step:t.pricingFields.per_tokens.step,before:"Tokens"},on:{input:function(i){t.formData.pricing.per_tokens=i}}})],1)])]),t.providerUrl?e("tr",[e("th",{attrs:{"data-has-button":"","data-mobile":"true"}},[e("button",{attrs:{type:"button"}},[t._v(" "+t._s(t.$t("simplify.model.table.pricing.link"))+" ")])]),e("td",{staticClass:"k-table-cell",attrs:{"data-mobile":"true"}},[e("span",{staticStyle:{"padding-inline":"var(--table-cell-padding)"}},[e("a",{staticStyle:{color:"var(--color-blue-600)","text-decoration":"underline"},attrs:{href:t.providerUrl,target:"_blank",rel:"noopener noreferrer"}},[t._v(" "+t._s(t.providerUrl)+" ")])])])]):t._e()])])])]):t._e()],1)],1)],1)},Bt=[],Mt=f(Lt,Ft,Bt,!1,null,null);const jt=Mt.exports;panel.plugin("kirbydesk/simplify",{icons:{"kirby-simplify":'<path d="M12.1532 8.22465C14.4853 8.22465 16.375 6.38312 16.375 4.11233C16.375 1.84153 14.4853 0 12.1532 0C9.82109 0 7.9314 1.84153 7.9314 4.11233C7.9314 6.38312 9.82196 8.22465 12.1532 8.22465Z"/><path d="M22.1434 7.73105C21.209 7.70734 16.4569 7.78947 12.3177 11.5978C12.2716 11.6402 12.2134 11.6613 12.1543 11.6613C12.0952 11.6613 12.0369 11.6402 11.9909 11.5978C7.85075 7.78947 3.0987 7.70734 2.16428 7.73105C2.07215 7.73359 2 7.80725 2 7.89615V19.9055C2 19.9961 2.07388 20.0689 2.16689 20.0706C3.11087 20.0875 7.88378 20.3551 11.9926 23.9399C12.0387 23.9797 12.096 24 12.1543 24C12.2125 24 12.2699 23.9797 12.316 23.9399C16.4248 20.3559 21.1977 20.0884 22.1417 20.0706C22.2347 20.0689 22.3086 19.9952 22.3086 19.9055V7.89615C22.3086 7.80641 22.2364 7.73274 22.1443 7.73105"/>',anthropic:'<path d="M16.7645 5H13.4568L19.3799 20H22.6107L16.7645 5ZM7.22604 5L1.37988 20H4.68758L5.99527 16.8462H12.1491L13.3799 19.9231H16.6876L10.6876 5H7.30296H7.22604ZM6.91834 14.0769L8.91834 8.76923L10.9953 14.0769H6.99527H6.91834Z"/>',gemini:'<path d="M23.9996 12.0235C17.5625 12.4117 12.4114 17.563 12.0232 24H11.9762C11.588 17.563 6.4369 12.4117 0 12.0235V11.9765C6.4369 11.5883 11.588 6.43719 11.9762 0H12.0232C12.4114 6.43719 17.5625 11.5883 23.9996 11.9765V12.0235Z"/>',mistral:'<path d="M3 3H6.6V6.6L10.2001 6.6001V10.2001L13.8 10.2002L13.8 6.6001H17.3999V3H20.9999V20.9999H17.3999V13.8002L13.8 13.7998V17.3998H10.2V13.8002L6.6 13.7998V20.9999H3V3Z"/>',openai:'<path d="M11 4C11.6487 4 12.2498 4.20569 12.7411 4.55646C11.4486 5.22914 10.2602 6.07623 8.99996 6.80385L9.99996 8.5359C11.575 7.62654 13.0517 6.48541 14.7608 5.83037C16.1134 5.31198 17.681 5.83976 18.4282 7.13398C18.7526 7.69582 18.8749 8.31917 18.8168 8.92006C17.588 8.13708 16.2602 7.53146 15 6.80385L14 8.5359C15.575 9.44525 17.3016 10.1536 18.7234 11.3061C19.8487 12.2183 20.1754 13.8398 19.4282 15.134C19.1037 15.696 18.6249 16.1137 18.0752 16.3638C18.1385 14.9081 18 13.4553 18 12H16C16 13.8184 16.2498 15.6685 15.9626 17.4758C15.7353 18.9063 14.4944 20 13 20C12.351 20 11.7498 19.7942 11.2584 19.4432C12.5508 18.7701 13.7396 17.9238 15 17.1962L14 15.4641C12.4252 16.3733 10.9478 17.5147 9.23912 18.1696C7.88657 18.688 6.31898 18.1602 5.57176 16.866C5.24729 16.304 5.12493 15.6805 5.18316 15.0794C6.41224 15.8621 7.73964 16.4685 8.99997 17.1962L9.99997 15.4641C8.42517 14.5549 6.69801 13.8462 5.27649 12.6939C4.15128 11.7817 3.82455 10.1602 4.57176 8.86602C4.89624 8.30402 5.37506 7.88628 5.9247 7.63618C5.86145 9.09192 5.99997 10.5447 5.99997 12H7.99997C7.99997 10.1816 7.75013 8.33148 8.03733 6.52422C8.26467 5.09369 9.50554 4 11 4ZM14.7925 3.74171C13.8765 2.67659 12.5176 2 11 2C8.7782 2 6.89621 3.44833 6.24435 5.45243C4.86393 5.71314 3.59851 6.55175 2.83971 7.86602C1.72883 9.79013 2.04213 12.1442 3.4518 13.7107C2.98737 15.0366 3.08092 16.5518 3.83971 17.866C4.95059 19.7901 7.14589 20.6958 9.20742 20.2583C10.1234 21.3234 11.4824 22 13 22C15.2217 22 17.1037 20.5517 17.7556 18.5476C19.136 18.2869 20.4014 17.4482 21.1602 16.134C22.2711 14.2099 21.9578 11.8559 20.5481 10.2893C21.0126 8.96345 20.919 7.44825 20.1602 6.13398C19.0493 4.20987 16.854 3.30419 14.7925 3.74171Z"/>',reset:'<path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"/>',pause:'<path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM9 9H11V15H9V9ZM13 9H15V15H13V9Z"/>',apicall:'<path d="M14 4.99997H4V17H10.5908L12 19.0117L13.4092 17H20V11H22V18C22 18.5445 21.5445 19 21 19H14.4502L12 22.5L9.5498 19H3C2.45547 19 2 18.5445 2 18V3.99997C2.00002 3.45544 2.45546 2.99996 3 2.99996H14V4.99997ZM19.5293 1.3193C19.7058 0.893513 20.2942 0.8935 20.4707 1.3193L20.7236 1.93063C21.1555 2.97343 21.9615 3.80614 22.9746 4.2568L23.6914 4.57614C24.1022 4.75882 24.1022 5.35635 23.6914 5.53903L22.9326 5.87692C21.945 6.3162 21.1534 7.11943 20.7139 8.1279L20.4668 8.69333C20.2863 9.10747 19.7136 9.10747 19.5332 8.69333L19.2861 8.1279C18.8466 7.11942 18.0551 6.3162 17.0674 5.87692L16.3076 5.53903C15.8974 5.35618 15.8974 4.75895 16.3076 4.57614L17.0254 4.2568C18.0384 3.80614 18.8445 2.97343 19.2764 1.93063L19.5293 1.3193Z"/>',project:'<path d="M12 1L21.5 6.5V17.5L12 23L2.5 17.5V6.5L12 1ZM12 3.311L4.5 7.65311V16.3469L12 20.689L19.5 16.3469V7.65311L12 3.311ZM12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z"/>',stats:'<path d="M5 3V19H21V21H3V3H5ZM20.2929 6.29289L21.7071 7.70711L16 13.4142L13 10.415L8.70711 14.7071L7.29289 13.2929L13 7.58579L16 10.585L20.2929 6.29289Z"/>',pages:'<path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z"/>',prompt:'<path d="M1 22C1 17.5817 4.58172 14 9 14C13.4183 14 17 17.5817 17 22H15C15 18.6863 12.3137 16 9 16C5.68629 16 3 18.6863 3 22H1ZM9 13C5.685 13 3 10.315 3 7.00002C3 3.68502 5.685 1.00002 9 1.00002C12.315 1.00002 15 3.68502 15 7.00002C15 10.315 12.315 13 9 13ZM9 11C11.21 11 13 9.21002 13 7.00002C13 4.79002 11.21 3.00002 9 3.00002C6.79 3.00002 5 4.79002 5 7.00002C5 9.21002 6.79 11 9 11ZM21.5476 0.783569C22.4773 2.65651 23 4.76723 23 7.00002C23 9.23281 22.4773 11.3435 21.5476 13.2165L19.9027 12.0201C20.6071 10.4928 21 8.79231 21 7.00002C21 5.20772 20.6071 3.5072 19.9027 1.9799L21.5476 0.783569ZM18.2463 3.18451C18.732 4.36026 19 5.64884 19 7.00002C19 8.35119 18.732 9.63977 18.2463 10.8155L16.5694 9.59595C16.8485 8.78194 17 7.90867 17 7.00002C17 6.09136 16.8485 5.21809 16.5694 4.40408L18.2463 3.18451Z"/>',privacy:'<path d="M12 1L20.2169 2.82598C20.6745 2.92766 21 3.33347 21 3.80217V13.7889C21 15.795 19.9974 17.6684 18.3282 18.7812L12 23L5.6718 18.7812C4.00261 17.6684 3 15.795 3 13.7889V3.80217C3 3.33347 3.32553 2.92766 3.78307 2.82598L12 1ZM12 3.04879L5 4.60434V13.7889C5 15.1263 5.6684 16.3752 6.7812 17.1171L12 20.5963L17.2188 17.1171C18.3316 16.3752 19 15.1263 19 13.7889V4.60434L12 3.04879ZM12 7C13.1046 7 14 7.89543 14 9C14 9.73984 13.5983 10.3858 13.0011 10.7318L13 15H11L10.9999 10.7324C10.4022 10.3866 10 9.74025 10 9C10 7.89543 10.8954 7 12 7Z"/>',timeout:'<path d="M17.6177 5.9681L19.0711 4.51472L20.4853 5.92893L19.0319 7.38231C20.2635 8.92199 21 10.875 21 13C21 17.9706 16.9706 22 12 22C7.02944 22 3 17.9706 3 13C3 8.02944 7.02944 4 12 4C14.125 4 16.078 4.73647 17.6177 5.9681ZM12 20C15.866 20 19 16.866 19 13C19 9.13401 15.866 6 12 6C8.13401 6 5 9.13401 5 13C5 16.866 8.13401 20 12 20ZM11 8H13V14H11V8ZM8 1H16V3H8V1Z"/>'},components:{simplifyview:I,"simplify-variant-detail":dt,"simplify-provider-detail":Pt,"simplify-model-detail":jt}})})();
